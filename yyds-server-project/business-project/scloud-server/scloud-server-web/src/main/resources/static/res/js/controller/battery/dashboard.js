scloudApp.controller("batteryDashboardController",["$scope","$rootScope","batteryService",function(t,r,e){function a(){t.batteryGroupStat=null,e.getBatteryGroupStat(function(r){for(var e=["#818690","#f7b15b","#45f3f9","#2da3fa"],a=0,o=0;o<r.length;o++)a+=r[o].count;for(o=0;o<r.length;o++)r[o].percent=(r[o].count/a*100).toFixed(0),r[o].bgColor=e[o];t.batteryGroupStat=r})}function o(){e.getBatteryGroupHealth(function(r){t.batteryGroupHealth=r,chart.batteryGroupHealth({data:r.map(function(t){return t.count}),id:"batteryGroupHealth"})})}function n(){t.systemDistribution=null,e.getSystemDistribution(function(r){for(var e=0,a=0;a<r.length;a++)e+=r[a].count;for(a=0;a<r.length;a++)r[a].percent=(r[a].count/e*100).toFixed(0);t.systemDistribution=r})}function l(){e.getBatteryAlarmNum(function(e){t.alarm.num.level1=e[0].count,t.alarm.num.level2=e[1].count;var a=e[0].count+e[1].count;batteryAlarmInit("alarmLevel1",{frontColor:r.CONST.alarmColorList[0],value:e[0].count,sum:a}),batteryAlarmInit("alarmLevel2",{frontColor:r.CONST.alarmColorList[1],value:e[1].count,sum:a})})}function u(){t.volumeStat=null,e.getCapacityStat(function(r){for(var e=["#3bc8d2","#3081d5","#8b3f66"],a=["full","half","empty"],o=0,n=0;n<r.length;n++)o+=r[n].count;for(n=0;n<r.length;n++)r[n].percent=(r[n].count/o*100).toFixed(0),r[n].bgColor=e[n],r[n].img=a[n];t.volumeStat=r})}$state&&($state=window.$state),$stateParams&&($stateParams=window.$stateParams),t.batteryGroupStat=[0,0,0,0],t.batteryGroupNum220=null,t.batteryGroupNum48=null,t.systemDistribution=[0,0,0,0],t.volumeStat=[0,0,0],t.alarm={},t.alarm.num={},t.batteryGroupHealth=null,a(),o(),n(),l(),u(),t.$watch("enterprise.refreshInterval",function(){var t=r.enterprise.refreshInterval;void 0!==t&&null!==t&&(window.timerTaskManager.clearAll(!0),t<=0||window.timerTaskManager.create(function(){window.chart.disposeAll(),a(),o(),n(),l(),u()},1e3*t,!1))})}]);