scloudApp.controller("logListController",["$scope","$rootScope","$filter","logService","initService",function(t,e,o,n,i){function g(){if(!t.logQuery.tStart||!t.logQuery.tEnd){var e=new Date;e.setDate(e.getDate()+1),t.logQuery.tEnd=o("date")(e,"yyyy/MM/dd 00:00:00"),e.setDate(e.getDate()-7),t.logQuery.tStart=o("date")(e,"yyyy/MM/dd 00:00:00")}t.isLoading=!0,"设备操作日志"===t.logQuery.logType?n.getDeviceLoggerList(t.paginationConf,t.logQuery,function(e){t.isLoading=!1,t.logList=e.list,t.paginationConf.totalItems=e.count,i.initTooltip()},function(){t.isLoading=!1}):t.logQuery.logType?n.getLoggerList(t.paginationConf,t.logQuery,function(e){t.isLoading=!1,t.logList=e.list,t.paginationConf.totalItems=e.count,i.initTooltip()},function(){t.isLoading=!1}):t.isLoading=!1}$state&&($state=window.$state),$stateParams&&($stateParams=window.$stateParams),t.logQuery={logType:"访问日志"},t.isLoading=!1,t.paginationConf={currentPage:1,itemsPerPage:15,pagesLength:9,onChange:function(){}},t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",g),t.query=function(){g()},t.reset=function(){t.logQuery.currentPage=null,t.logQuery.pageSize=null,t.logQuery.userName="",t.logQuery.keyword="",t.logQuery.tStart=null,t.logQuery.tEnd=null},function(){n.getLoggerType(function(e){t.loggerType=e,t.loggerType.push("设备操作日志")})}()}]);