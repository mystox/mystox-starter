function Response(e,t){this.data=e,this.time=t}function formatJson(e,t){var a=null,r="",n=0;return t=t||{},t.newlineAfterColonIfBeforeBraceOrBracket=!0===t.newlineAfterColonIfBeforeBraceOrBracket,t.spaceAfterColon=!1!==t.spaceAfterColon,"string"!=typeof e?e=JSON.stringify(e):(e=JSON.parse(e),e=JSON.stringify(e)),a=/([\{\}])/g,e=e.replace(a,"\r\n$1\r\n"),a=/([\[\]])/g,e=e.replace(a,"\r\n$1\r\n"),a=/(\,)/g,e=e.replace(a,"$1\r\n"),a=/(\r\n\r\n)/g,e=e.replace(a,"\r\n"),a=/\r\n\,/g,e=e.replace(a,","),t.newlineAfterColonIfBeforeBraceOrBracket||(a=/\:\r\n\{/g,e=e.replace(a,":{"),a=/\:\r\n\[/g,e=e.replace(a,":[")),t.spaceAfterColon&&(a=/\:/g,e=e.replace(a,":")),$.each(e.split("\r\n"),function(e,t){var a=0,s=0,c="";for(t.match(/\{$/)||t.match(/\[$/)?s=1:t.match(/\}/)||t.match(/\]/)?0!==n&&(n-=1):s=0,a=0;a<n;a++)c+="    ";r+=c+t+"\r\n",n+=s}),r}scloudApp.controller("dhcController",["$scope","$rootScope","$http",function(e,t,a){var r={siteId:"58c8d08e7ecd6a2c2cd9c73c",deviceId:"58ca652f7ecd6a2f5096a406",deviceCode:"33010400011070002",voltageLevel:240,specVoltage:2,specCapacity:1e3,signalTypeCode:"001"};e.paramJson=null,e.requests=[{uri:"/batteryFunc/createPngAndReport",desc:"生成报表（测试专用）",param:{deviceId:"58ec762797232323b44af9fd",year:2017,month:3}},{uri:"/batteryFunc/drawEventDatas",desc:"生成充放电事件图片（测试专用）",param:{deviceCode:"33010400011070003",eventId:0}},{uri:"/batteryFunc/stat/getStatus",desc:"统计运行状态,4种运行状态统计数量（充电、放电、浮充、脱离）",param:null},{uri:"/batteryFunc/stat/getType",desc:"统计供电设备类型,4种供电设备类型统计数量（48V HVDC、240V HVDC、380V UPS、220V UPS）",param:null},{uri:"/batteryFunc/stat/getHealth",desc:"统计健康状态,4种健康状态统计数量（优、良、中、差）",param:null},{uri:"/batteryFunc/stat/getCapacity",desc:"统计剩余容量,3种剩余容量状态（高、中、低/充足、一般、较低）",param:null},{uri:"/batteryFunc/stat/getAlarm",desc:"统计告警数量,2类告警的数量（一级告警、二级告警）",param:null},{uri:"/batteryFunc/getBatteryQueryList",desc:"获取蓄电池组刷选条件：供电设备类型、电池规格、运行状态",param:null},{uri:"/batteryFunc/getBatteryAlarmQueryList",desc:"获取蓄电池组刷选条件：电压等级 + 电压规格 + 容量规格",param:{siteId:r.siteId}},{uri:"/batteryFunc/getBatteryList",desc:"按筛选条件获取蓄电池组列表（分页）",param:{siteId:r.siteId,name:null,specVoltage:null,specCapacity:null,status:null,currentPage:null,pageSize:null}},{uri:"/batteryFunc/getBatteryDetail",desc:"获取蓄电池组的详细信息",param:{deviceId:r.deviceId}},{uri:"/batteryFunc/getBatterySignalList",desc:"获取蓄电池组的信号量",param:{deviceId:r.deviceId}},{uri:"/batteryFunc/updateSignal",desc:"同步信号量",param:{deviceId:r.deviceId}},{uri:"/batteryFunc/getHistoryBatteryData",desc:"获取蓄电池历史数据",param:{deviceId:r.deviceId,year:2017,month:-1}},{uri:"/batteryFunc/exportBatteryHistoryData",desc:"将蓄电池历史数据导出为excel",param:{deviceId:r.deviceId,year:2017,month:-1}},{uri:"/batteryFunc/getEventInfoList",desc:"获取充放电事件列表",param:{deviceCode:r.deviceCode}},{uri:"/batteryFunc/exportBatteryEventData",desc:"将蓄电池充放电事件导出为excel",param:{deviceCode:r.deviceCode,eventId:1}},{uri:"/batteryFunc/exportBatteryReport",desc:"获取报表PDF的文件存储路径",param:{deviceId:r.deviceId,year:2017,month:-1}},{uri:"/batteryFunc/getAlarmList",desc:"获取蓄电池实时/历史告警列表",param:{siteId:r.siteId,state:"待处理",deviceName:null,tStart:null,tEnd:null,currentPage:null,pageSize:null}},{uri:"/batteryFunc/getDISignalTypes",desc:"获取蓄电池遥信信号类型列表",param:null},{uri:"/batteryFunc/checkStateInBatch",desc:"批量确认告警",param:{signalType:"001",siteId:r.siteId,level:1}},{uri:"/batteryFunc/eliminateAlarmInBatch",desc:"批量消除告警",param:{signalType:r.signalTypeCode,siteId:r.siteId,level:1}},{uri:"/batteryFunc/getConfig",desc:"查询蓄电池组参数信息",param:{deviceId:r.deviceId}},{uri:"/batteryFunc/getBatteryAlarmParamList",desc:"获取一个站点下所有蓄电池组内的不同类遥信信号列表",param:{siteId:r.siteId,specVoltage:r.specVoltage}},{uri:"/batteryFunc/modifyThreshold",desc:"批量修改门限值（告警触发值）",param:{siteId:r.siteId,voltageLevel:r.voltageLevel,specVoltage:r.specVoltage,specCapacity:r.specCapacity,singalTypeCode:r.signalTypeCode,threshold:48}},{uri:"/userGroupFunc/add",desc:"添加用户组",param:{id:"596addda04fdf025b8c4afe1",name:"自定义用户组1",privilegeCodes:["001","208","211"]}},{uri:"/userGroupFunc/modify",desc:"添加用户组",param:{id:"596addda04fdf025b8c4afe1",name:"自定义用户组1",privilegeCodes:["001","208","221","301"]}},{uri:"/userGroupFunc/delete",desc:"删除用户组",param:{id:"596addda04fdf025b8c4afe1",name:"自定义用户组1",privilegeCodes:["001","208","221","301"]}},{uri:"/reportFunc/system/site/off",desc:"报表-系统统计报表-局站停电统计",param:{stationType:4,startTime:function(){var e=new Date;return e.setMonth(7),e.setDate(1),e.getTime()}(),endTime:function(){var e=new Date;return e.setMonth(7),e.setDate(2),e.getTime()}()}},{uri:"/reportFunc/system/site/break",desc:"报表-系统统计报表-局站中断统计",param:{stationType:4,startTime:function(){var e=new Date;return e.setMonth(6),e.setDate(20),e.getTime()}(),endTime:function(){return(new Date).getTime()}()}},{uri:"/reportFunc/system/site/break/average",desc:"报表-系统统计报表-市电停电断站统计",param:{stationType:4,startTime:function(){var e=new Date;return e.setMonth(6),e.setDate(20),e.getTime()}(),endTime:function(){return(new Date).getTime()}()}},{uri:"/reportFunc/system/site/count",desc:"报表-系统统计报表-局站数量统计",param:{fsuManufactory:"义益钛迪"}},{uri:"/reportFunc/alarm/fsu/operation",desc:"报表-告警报表-FSU运行统计",param:{fsuManufactory:"义益钛迪"}},{uri:"/reportFunc/alarm/fsu/alarm",desc:"报表-告警报表-FSU告警统计",param:{fsuManufactory:"义益钛迪",startTime:function(){var e=new Date;return e.setMonth(1),e.getTime()}(),endTime:(new Date).getTime()}},{uri:"/reportFunc/alarm/fsu/offline",desc:"报表-告警报表-FSU离线率统计",param:{fsuManufactory:"义益钛迪",startTime:function(){var e=new Date;return e.setMonth(1),e.getTime()}(),endTime:(new Date).getTime()}}],e.methods=["POST","GET"];for(var n=0;n<e.requests.length;n++)e.requests[n].pre=e.requests[n].uri.split("/")[1];e.showParam=function(t){e.paramJson=formatJson(t)},e.sendRequest=function(t){t=parseInt(t),e.responses=[];var r=JSON.parse(e.paramJson);e.pending=!0;for(var n=0,s=0;s<t;s++){var c=new Date;e.method===e.methods[0]?a.post(ctx+e.uri,r).success(function(a){++n===t&&(e.pending=!1),e.responses.push(new Response(formatJson(a),new Date-c)),console.log("请求URI："+ctx+e.uri),console.log(a)}).error(function(){console.error("请求失败")}):e.method===e.methods[1]&&a.get(ctx+e.uri,r).success(function(a){++n===t&&(e.pending=!1),e.responses.push(new Response(formatJson(a),new Date-c)),console.log("请求URI："+ctx+e.uri),console.log(a)}).error(function(){console.error("请求失败")})}}}]);