!function(){var l,y,e,t;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&(e="setRequestHeader",t=function(r){return function(e,t){if("__setXHR_"===e){var n=t(this);n instanceof Function&&n(this)}else r.apply(this,arguments)}},window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e]));var n=angular.module("angularFileUpload",[]);function c(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function _(e,t,n,r,i,a,o,l,f,s){function u(){r&&(e(i.ngModel).assign(n,o),t(function(){r&&r.$setViewValue(null!=o&&0==o.length?null:o)})),i.ngModelRejected&&e(i.ngModelRejected).assign(n,l),a&&e(a)(n,{$files:o,$rejectedFiles:l,$event:f})}s?u():t(function(){u()})}function b(e,t,n,r){var i=t(e,{$file:n,$event:r});if(null==i)return!0;if(angular.isString(i)){var a=new RegExp(function e(t){if(2<t.length&&"/"===t[0]&&"/"===t[t.length-1])return t.substring(1,t.length-1);var n=t.split(","),r="";if(1<n.length)for(y=0;y<n.length;y++)r+="("+e(n[y])+")",y<n.length-1&&(r+="|");else 0==t.indexOf(".")&&(t="*"+t),r=(r="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,".");return r}(i),"gi");i=null!=n.type&&n.type.match(a)||null!=n.name&&n.name.match(a)}return i}n.version="3.2.5",n.service("$upload",["$http","$q","$timeout",function(i,e,a){function t(n){n.method=n.method||"POST",n.headers=n.headers||{},n.transformRequest=n.transformRequest||function(e,t){return window.ArrayBuffer&&e instanceof window.ArrayBuffer?e:i.defaults.transformRequest[0](e,t)};var t=e.defer(),r=t.promise;return n.headers.__setXHR_=function(){return function(e){e&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,t.notify?t.notify(e):r.progress_fn&&a(function(){r.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,t.notify?t.notify(e):r.progress_fn&&a(function(){r.progress_fn(e)}))},!1))}},i(n).then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.notify(e)}),r.success=function(t){return r.then(function(e){t(e.data,e.status,e.headers,n)}),r},r.error=function(t){return r.then(null,function(e){t(e.data,e.status,e.headers,n)}),r},r.progress=function(t){return r.progress_fn=t,r.then(null,null,function(e){t(e)}),r},r.abort=function(){return n.__XHR&&a(function(){n.__XHR.abort()}),r},r.xhr=function(e){var t;return n.xhrFn=(t=n.xhrFn,function(){t&&t.apply(r,arguments),e.apply(r,arguments)}),r},r}this.upload=function(o){return o.headers=o.headers||{},o.headers["Content-Type"]=void 0,o.transformRequest=o.transformRequest?"[object Array]"===Object.prototype.toString.call(o.transformRequest)?o.transformRequest:[o.transformRequest]:[],o.transformRequest.push(function(e){var t=new FormData,n={};for(l in o.fields)o.fields.hasOwnProperty(l)&&(n[l]=o.fields[l]);if(e&&(n.data=e),o.formDataAppender)for(l in n)n.hasOwnProperty(l)&&o.formDataAppender(t,l,n[l]);else for(l in n)if(n.hasOwnProperty(l)){var r=n[l];void 0!==r&&("[object String]"===Object.prototype.toString.call(r)?t.append(l,r):o.sendObjectsAsJsonBlob&&"object"==typeof r?t.append(l,new Blob([r],{type:"application/json"})):t.append(l,JSON.stringify(r)))}if(null!=o.file){var i=o.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(o.file)){var a="[object String]"===Object.prototype.toString.call(i);for(y=0;y<o.file.length;y++)t.append(a?i:i[y],o.file[y],o.fileName&&o.fileName[y]||o.file[y]?o.file[y].name:null)}else t.append(i,o.file,o.fileName||o.file.name)}return t}),t(o)},this.http=function(e){return t(e)}}]),n.directive("ngFileSelect",["$parse","$timeout","$compile",function(i,a,e){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){!function(o,i,l,f,s,u){function a(){return"input"===i[0].tagName.toLowerCase()&&i.attr("type")&&"file"===i.attr("type").toLowerCase()}var c=!1;function p(e){if(!c){c=!0;try{var t=e.__files_||e.target&&e.target.files,n=[],r=[],i=s(l.ngAccept);for(y=0;y<t.length;y++){var a=t.item(y);b(o,i,a,e)?n.push(a):r.push(a)}_(s,u,o,f,l,l.ngFileChange||l.ngFileSelect,n,r,e),0==n.length&&(e.target.value=n),e.target&&e.target.getAttribute("__ngf_gen__")&&angular.element(e.target).remove()}finally{c=!1}}}function r(e){if(!i.attr("disabled")){for(var t=angular.element('<input type="file">'),n=0;n<i[0].attributes.length;n++){var r=i[0].attributes[n];"type"!==r.name&&t.attr(r.name,r.value)}return a()?(i.replaceWith(t),i=t):(t.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__ngf_gen__",!0),i.__ngf_ref_elem__&&i.__ngf_ref_elem__.remove(),i.__ngf_ref_elem__=t,i.parent()[0].insertBefore(t[0],i[0]),i.css("overflow","hidden")),function(e){l.ngMultiple&&e.attr("multiple",s(l.ngMultiple)(o)),l.accept&&e.attr("accept",l.accept),l.ngCapture&&e.attr("capture",s(l.ngCapture)(o)),l.ngDisabled&&e.attr("disabled",s(l.ngDisabled)(o)),e.bind("change",p)}(t),t}}function d(e){_(s,u,o,f,l,l.ngFileChange||l.ngFileSelect,[],[],e,!0)}window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(i,r,p,d):i.bind("click",function e(t){var n=r();n&&(d(t),n[0].click()),a()&&(i.bind("click",e),t.preventDefault())})}(e,t,n,r,i,a)}}}]),n.directive("ngFileDrop",["$parse","$timeout","$location",function(i,a,o){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){!function(g,r,i,a,o,v,h){var e=c();i.dropAvailable&&v(function(){g.dropAvailable?g.dropAvailable.value=e:g.dropAvailable=e});if(!e)return 1==o(i.hideOnDropNotAvailable)(g)&&r.css("display","none");var l,n=null,f=o(i.stopPropagation),s=1,m=o(i.ngAccept),u=o(i.ngDisabled);r[0].addEventListener("dragover",function(e){if(!u(g)){if(e.preventDefault(),f(g)&&e.stopPropagation(),-1<navigator.userAgent.indexOf("Chrome")){var t=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy"}v.cancel(n),g.actualDragOverClass||(l=function(e,t,n){var r=!0,i=n.dataTransfer.items;if(null!=i)for(y=0;y<i.length&&r;y++)r=r&&("file"==i[y].kind||""==i[y].kind)&&b(e,m,i[y],n);var a=o(t.dragOverClass)(e,{$event:n});return a&&(a.delay&&(s=a.delay),a.accept&&(a=r?a.accept:a.reject)),a||t.dragOverClass||"dragover"}(g,i,e)),r.addClass(l)}},!1),r[0].addEventListener("dragenter",function(e){u(g)||(e.preventDefault(),f(g)&&e.stopPropagation())},!1),r[0].addEventListener("dragleave",function(){u(g)||(n=v(function(){r.removeClass(l),l=null},s||1))},!1),r[0].addEventListener("drop",function(n){u(g)||(n.preventDefault(),f(g)&&n.stopPropagation(),r.removeClass(l),l=null,function(t,n,e,r){var i=[],a=[],o=t.dataTransfer.items,l=0;function f(e){b(g,m,e,t)?i.push(e):a.push(e)}if(o&&0<o.length&&"file"!=h.protocol())for(y=0;y<o.length;y++){if(o[y].webkitGetAsEntry&&o[y].webkitGetAsEntry()&&o[y].webkitGetAsEntry().isDirectory){var s=o[y].webkitGetAsEntry();if(s.isDirectory&&!e)continue;null!=s&&d(i,s)}else{var u=o[y].getAsFile();null!=u&&f(u)}if(!r&&0<i.length)break}else{var c=t.dataTransfer.files;if(null!=c)for(y=0;y<c.length&&(f(c.item(y)),r||!(0<i.length));y++);}var p=0;function d(t,n,r){if(null!=n)if(n.isDirectory){var e=(r||"")+n.name;f({name:n.name,type:"directory",path:e});var i=n.createReader(),a=[];l++;var o=function(){i.readEntries(function(e){try{if(e.length)a=a.concat(Array.prototype.slice.call(e||[],0)),o();else{for(y=0;y<a.length;y++)d(t,a[y],(r||"")+n.name+"/");l--}}catch(e){l--,console.error(e)}},function(){l--})};o()}else l++,n.file(function(e){try{l--,e.path=(r||"")+e.name,f(e)}catch(e){l--,console.error(e)}},function(){l--})}!function e(t){v(function(){if(l)10*p++<2e4&&e(10);else{if(!r&&1<i.length){for(y=0;"directory"==i[y].type;)y++;i=[i[y]]}n(i,a)}},t||0)}()}(n,function(e,t){_(o,v,g,a,i,i.ngFileChange||i.ngFileDrop,e,t,n)},0!=o(i.allowDir)(g),i.multiple||o(i.ngMultiple)(g)))},!1)}(e,t,n,r,i,a,o)}}}]),n.directive("ngNoFileDrop",function(){return function(e,t){c()&&t.css("display","none")}}),n.directive("ngFileDropAvailable",["$parse","$timeout",function(i,a){return function(e,t,n){if(c()){var r=i(n.ngFileDropAvailable);a(function(){r(e)})}}}]);var r=angular.module("ngFileUpload",[]);for(l in n)n.hasOwnProperty(l)&&(r[l]=n[l])}();