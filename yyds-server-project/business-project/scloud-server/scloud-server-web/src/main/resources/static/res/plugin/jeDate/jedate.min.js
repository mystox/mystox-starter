(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.jeDate=t()}})(this,function(){var doc=document,win=window;var jet={},doc=document,regymdzz="YYYY|MM|DD|hh|mm|ss|zz",gr=/\-/g,regymd="YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""),parseInt=function(e){return window.parseInt(e,10)};var $Q=function(e,t){t=t||document;return e.nodeType?e:t.querySelector(e)};var jeDate=function(e,t){var a=typeof t==="function"?t():t;return new jeDatePick(e,a)};jeDate.dateVer="V6.5.0";jeDate.extend=jet.extend=function(){var e,t,a,n,s=false,i=arguments[0],r=1,l=arguments.length;if(typeof i==="boolean")s=i,i=arguments[1]||{},r=2;if(typeof i!=="object"&&typeof i!=="function")i={};if(l===r)i=this,--r;for(;r<l;r++){if((e=arguments[r])!=null){for(t in e){a=i[t],n=e[t];if(i===n)continue;if(n!==undefined)i[t]=n}}}return i};jeDate.nowDate=function(e,t){t=t||"YYYY-MM-DD hh:mm:ss";if(!isNaN(e))e={DD:e};return jet.parse(jet.getDateTime(e),t)};jeDate.convert=function(e){e.format=e.format||"YYYY-MM-DD hh:mm:ss";e.addval=e.addval||[];var a=jet.reMatch(e.format),n={};jet.each(jet.reMatch(e.val),function(e,t){n[a[e]]=parseInt(t)});var t=new DateTime(e.addval,n),s={YYYY:t.GetYear(),MM:t.GetMonth(),DD:t.GetDate(),hh:t.GetHours(),mm:t.GetMinutes(),ss:t.GetSeconds()};return s};jeDate.valText=function(e,t){return jet.valText(e,t)};jeDate.timeStampDate=function(e,t){t=t||"YYYY-MM-DD hh:mm:ss";var a=/^(-)?\d{1,10}$/.test(e)||/^(-)?\d{1,13}$/.test(e);if(/^[1-9]*[1-9][0-9]*$/.test(e)&&a){var n=parseInt(e);if(/^(-)?\d{1,10}$/.test(n)){n=n*1e3}else if(/^(-)?\d{1,13}$/.test(n)){n=n*1e3}else if(/^(-)?\d{1,14}$/.test(n)){n=n*100}else{alert("时间戳格式不正确");return}var s=new Date(n);return jet.parse({YYYY:s.getFullYear(),MM:jet.digit(s.getMonth()+1),DD:jet.digit(s.getDate()),hh:jet.digit(s.getHours()),mm:jet.digit(s.getMinutes()),ss:jet.digit(s.getSeconds())},t)}else{var i=jet.reMatch(e),r=new Date(i[0],i[1]-1,i[2],i[3]||0,i[4]||0,i[5]||0),l=Math.round(r.getTime()/1e3);return l}};jeDate.getLunar=function(e){var t=jeLunar(e.YYYY,parseInt(e.MM)-1,e.DD);return{nM:t.lnongMonth,nD:t.lnongDate,cY:parseInt(t.solarYear),cM:parseInt(t.solarMonth),cD:parseInt(t.solarDate),cW:t.inWeekDays,nW:t.solarWeekDay}};jeDate.parse=jet.parse=function(a,e){return e.replace(new RegExp(regymdzz,"g"),function(e,t){return e=="zz"?"00":jet.digit(a[e])})};function DateTime(e,t){var a=this,n=new Date,s=["FullYear","Month","Date","Hours","Minutes","Seconds"];var i=jet.extend({YYYY:null,MM:null,DD:null,hh:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds()},t);var r=t==undefined?n:new Date(i.YYYY,i.MM,i.DD,i.hh,i.mm,i.ss);if((e||[]).length>0)jet.each(e,function(e,t){r["set"+s[e]](s[e]=="Month"?parseInt(t)-1:parseInt(t))});a.reDate=function(){return new DateTime};a.GetValue=function(){return r};a.GetYear=function(){return r.getFullYear()};a.GetMonth=function(){return r.getMonth()+1};a.GetDate=function(){return r.getDate()};a.GetHours=function(){return r.getHours()};a.GetMinutes=function(){return r.getMinutes()};a.GetSeconds=function(){return r.getSeconds()}}jet.extend(jet,{isType:function(e,t){var a=function(e){e=e.toLowerCase();return e.replace(/\b(\w)|\s(\w)/g,function(e){return e.toUpperCase()})};return Object.prototype.toString.call(e)=="[object "+a(t)+"]"},each:function(e,t,a){var n,s=0,i=e.length,r=i===undefined||e==="function";if(r){for(n in e){if(t.call(e[n],n,e[n])===false){break}}}else{for(;s<i;){if(t.call(e[s],s,e[s++])===false){break}}}return e},on:function(e,t,a){if(e.addEventListener){e.addEventListener(t,a,false);return true}else if(e.attachEvent){return e.attachEvent("on"+t,a)}else{e["on"+t]=a}},isObj:function(e){for(var t in e){return true}return false},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},reMatch:function(e){var a=[],t="",n=/(^\w{4}|\w{2}\B)/g;if(jet.isNum(e)){t=e.replace(n,"$1-")}else{t=/^[A-Za-z]+$/.test(e)?e.replace(n,"$1-"):e}jet.each(t.match(/\w+|d+/g),function(e,t){a.push(jet.isNum(t)?parseInt(t):t)});return a},equals:function(e,t){if(!t)return false;if(e.length!=t.length)return false;for(var a=0,n=e.length;a<n;a++){if(e[a]instanceof Array&&t[a]instanceof Array){if(!e[a].equals(t[a]))return false}else if(e[a]!=t[a]){return false}}return true},docScroll:function(e){e=e?"scrollLeft":"scrollTop";return document.body[e]|document.documentElement[e]},docArea:function(e){return document.documentElement[e?"clientWidth":"clientHeight"]},digit:function(e){return e<10?"0"+(e|0):e},isNum:function(e){return/^[+-]?\d*\.?\d*$/.test(e)?true:false},getDaysNum:function(e,t){var a=31,n=e%100!==0&&e%4===0||e%400===0;switch(parseInt(t)){case 2:a=n?29:28;break;case 4:case 6:case 9:case 11:a=30;break}return a},getYM:function(e,t,a){var n=new Date(e,t-1);n.setMonth(t-1+a);return{y:n.getFullYear(),m:n.getMonth()+1}},prevMonth:function(e,t,a){return jet.getYM(e,t,0-(a||1))},nextMonth:function(e,t,a){return jet.getYM(e,t,a||1)},setCss:function(e,t){for(var a in t)e.style[a]=t[a]},html:function(e,t){return typeof t==="undefined"?e&&e.nodeType===1?e.innerHTML:undefined:typeof t!=="undefined"&&t==true?e&&e.nodeType===1?e.outerHTML:undefined:e.innerHTML=t},text:function(e,t){var a=document.all?"innerText":"textContent";return typeof t==="undefined"?e&&e.nodeType===1?e[a]:undefined:e[a]=t},val:function(e,t){if(typeof t==="undefined"){return e&&e.nodeType===1&&typeof e.value!=="undefined"?e.value:undefined}t=t==null?"":t+"";e.value=t},attr:function(e,t){return e.getAttribute(t)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},stopPropagation:function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=true},template:function(e,t){var a=!/[^\w\-\.:]/.test(e)?document.getElementById(e).innerHTML:e;var n=function(e){var t=[];for(t[t.length]in e);return t},i=function(e){var t="";for(var a in e){t+="var "+a+'= $D["'+a+'"];'}return t},s=function(e,t){var a="var $out='"+e.replace(/[\r\n]/g,"").replace(/^(.+?)\{\%|\%\}(.+?)\{\%|\%\}(.+?)$/g,function(e){return e.replace(/(['"])/g,"\\$1")}).replace(/\{\%\s*=\s*(.+?)\%\}/g,"';$out+=$1;$out+='").replace(/\{\%(.+?)\%\}/g,"';$1;$out+='")+"';return new String($out);";var n=i(t),s=new Function("$D",n+a);return new s(t)+""};return s(a,t)},isValDiv:function(e){return/textarea|input/.test(e.tagName.toLocaleLowerCase())},valText:function(e,t){var a=$Q(e),n=jet.isValDiv(a)?"val":"text";if(t!=undefined){jet[n](a,t)}else{return jet[n](a)}},isBool:function(e){return e==undefined||e==true?true:false},getDateTime:function(e){var n=new DateTime,s=jet.extend({YYYY:null,MM:null,DD:null,hh:0,mm:0,ss:0},e),i={YYYY:"FullYear",MM:"Month",DD:"Date",hh:"Hours",mm:"Minutes",ss:"Seconds"};jet.each(["ss","mm","hh","DD","MM","YYYY"],function(e,t){if(!jet.isNum(parseInt(s[t])))return null;var a=n.GetValue();if(parseInt(s[t])||parseInt(s[t])==0){a["set"+i[t]](n["Get"+i[t]]()+(t=="MM"?-1:0)+parseInt(s[t]))}});var t={YYYY:n.GetYear(),MM:n.GetMonth(),DD:n.GetDate(),hh:n.GetHours(),mm:n.GetMinutes(),ss:n.GetSeconds()};return t}});function jeDatePick(e,t){var a={language:{name:"cn",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["日","一","二","三","四","五","六"],times:["小时","分钟","秒数"],timetxt:["时间选择","开始时间","结束时间"],backtxt:"返回日期",clear:"清空",today:"现在",yes:"确定"},format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",isShow:true,multiPane:true,onClose:true,range:false,trigger:"click",position:[],valiDate:[],isinitVal:false,initDate:{},isTime:true,isClear:true,isToday:true,isYes:true,festival:false,fixed:true,zIndex:2099,method:{},theme:{},shortcut:[],donefun:null,before:null,succeed:null};this.$opts=jet.extend(a,t||{});this.valCell=$Q(e);this.format=this.$opts.format;this.valCell!=null?this.init():alert(e+"  ID或类名不存在!");jet.extend(this,this.$opts.method);delete this.$opts.method}var searandom=function(){var e="",t=[1,2,3,4,5,6,7,8,9,0];for(var a=0;a<8;a++)e+=t[Math.round(Math.random()*(t.length-1))];return e};var jefix="jefixed",ymdzArr=jet.reMatch(regymdzz),elx="#jedate";jet.extend(jeDatePick.prototype,{init:function(){var o=this,t=o.$opts,e=new Date,a=[],n=t.trigger,s=t.initDate||[],i,d=t.range,r=t.zIndex==undefined?1e4:t.zIndex,h=jet.isBool(t.isShow),l=t.isinitVal==undefined||t.isinitVal==false?false:true;o.setDatas();t.before&&t.before(o.valCell);if(l&&n&&h){if(s[1]){var u=jet.getDateTime(s[0]);i=[{YYYY:u.YYYY,MM:jet.digit(u.MM),DD:jet.digit(u.DD),hh:jet.digit(u.hh),mm:jet.digit(u.mm),ss:jet.digit(u.ss)}]}else{i=o.getValue(jet.isObj(s[0])?s[0]:{})}if(!d)o.setValue([i[0]],t.format,true)}var c=function(){var n=jet.reMatch(o.format),e=o.getValue()!="",s=[],t=o.dlen==7?"hh:mm:ss":"YYYY-MM"+(o.dlen<=2?"":"-DD");o.selectValue=o.selectValue||[jet.parse(jet.getDateTime({}),t)];if(e&&h){var i=o.getValue().split(d);jet.each(new Array(d?2:1),function(a){s[a]={};jet.each(jet.reMatch(i[a]),function(e,t){s[a][n[e]]=parseInt(t)})});if(d)o.selectValue=i}else{var a=o.getValue({})[0],r=jet.nextMonth(a.YYYY,a.MM||jet.getDateTime({}).MM),l=o.dlen>2&&o.dlen<=6?{YYYY:r.y,MM:r.m}:{};s=[a]}o.selectDate=s;return s},f=[];o.minDate="";o.maxDate="";if(!h||!n)f=c();if(!h||!n){o.minDate=jet.isType(t.minDate,"function")?t.minDate(o):t.minDate;o.maxDate=jet.isType(t.maxDate,"function")?t.maxDate(o):t.maxDate;o.storeData(f[0],f[1]);o.renderDate();t.succeed&&t.succeed(o.dateCell)}else{if(n){jet.on(o.valCell,n,function(){if(document.querySelectorAll(elx).length>0)return;var e=c();o.minDate=jet.isType(t.minDate,"function")?t.minDate(o):t.minDate;o.maxDate=jet.isType(t.maxDate,"function")?t.maxDate(o):t.maxDate;o.storeData(e[0],e[1]);o.renderDate()})}}},setDatas:function(){var s=this,e=s.$opts,t=e.range,i=[],a=jet.isBool(e.isShow),n=e.multiPane;s.$data=jet.extend({year:false,month:false,day:true,time:false,timebtn:false},{shortcut:[],lang:e.language,yaerlist:[],monthlist:[[],[]],ymlist:[[],[]],daylist:[[],[]],clear:e.isClear,today:t?false:e.isToday,yes:e.isYes,pane:n?1:2});if(e.shortcut.length>0){jet.each(e.shortcut,function(e,t){var a=[],n=jet.isType(t.val,"function")?t.val():t.val;if(jet.isType(n,"object")){for(var s in n)a.push(s+":"+n[s]);i.push(jet.extend({},{name:t.name,val:"{"+a.join("#")+"}"}))}});s.$data.shortcut=i}s.dlen=function(){var t=jet.reMatch(s.format),n=[];jet.each(ymdzArr,function(e,a){jet.each(t,function(e,t){if(a==t)n.push(t)})});var e=n.length,a=n[0]=="hh"&&e<=3?7:e;return a}();s.$data.dlen=s.dlen;s.timeInspect=false;if(s.dlen==1){jet.extend(s.$data,{year:true,day:false})}else if(s.dlen==2){jet.extend(s.$data,{month:true,day:false})}else if(s.dlen>3&&s.dlen<=6){s.$data.timebtn=true}else if(s.dlen==7){jet.extend(s.$data,{day:false,time:true})}if(!a){s.$data.clear=false;s.$data.yes=false}},renderDate:function(){var e=this,t=e.$opts,a=jet.isBool(t.isShow),n=!a?elx+searandom():elx,s={zIndex:t.zIndex==undefined?1e4:t.zIndex};if(e.dateCell==undefined){e.dateCell=document.createElement("div");e.dateCell.id=n.replace(/\#/g,"");e.dateCell.className=elx.replace(/\#/g,"")+" "+(t.shortcut.length>0?" leftmenu":"");e.dateCell.setAttribute("author","chen guojun")}jet.html(e.dateCell,jet.template(e.dateTemplate(),e.$data));if(jet.isObj(t.theme)){var i=document.createElement("style"),r=".jedate"+searandom(),l=t.theme,o="background-color:"+l.bgcolor,d="color:"+(l.color==undefined?"#FFFFFF":l.color),h=l.pnColor==undefined?"":"color:"+l.pnColor+";";e.dateCell.className=e.dateCell.className+" "+r.replace(/^./g,"");i.setAttribute("type","text/css");i.innerHTML=r+" .jedate-menu p:hover{"+o+";"+d+";}"+r+" .jedate-header em{"+d+";}"+r+" .jedate-content .yeartable td.action span,"+r+" .jedate-content .monthtable td.action span,"+r+" .jedate-content .yeartable td.action span:hover,"+r+" .jedate-content .monthtable td.action span:hover{"+o+";border:1px "+l.bgcolor+" solid;"+d+";}"+r+" .jedate-content .daystable td.action,"+r+" .jedate-content .daystable td.action:hover,"+r+" .jedate-content .daystable td.action .lunar,"+r+" .jedate-header,"+r+" .jedate-time .timeheader,"+r+" .jedate-time .hmslist ul li.action,"+r+" .jedate-time .hmslist ul li.action:hover,"+r+" .jedate-time .hmslist ul li.disabled.action,"+r+" .jedate-footbtn .timecon,"+r+" .jedate-footbtn .btnscon span{"+o+";"+d+";}"+r+" .jedate-content .daystable td.other,"+r+" .jedate-content .daystable td.other .nolunar,"+r+" .jedate-content .daystable td.other .lunar{"+h+"}"+r+" .jedate-content .daystable td.contain,"+r+" .jedate-content .daystable td.contain:hover{background-"+h+"}";e.dateCell.appendChild(i)}e.compileBindNode(e.dateCell);if(document.querySelectorAll(n).length>0)document.body.removeChild($Q(n));!a?e.valCell.appendChild(e.dateCell):document.body.appendChild(e.dateCell);jet.setCss(e.dateCell,jet.extend({position:!a?"relative":t.fixed==true?"absolute":"fixed"},a?s:{}));e.methodEventBind();if(e.dlen==7||e.dlen>3&&e.dlen<=6)e.locateScroll();if(t.festival&&t.language.name=="cn")e.showFestival();if(a){e.dateOrien(e.dateCell,e.valCell);e.blankArea()}},setValue:function(e,s,t){var a=this,n=a.valCell,i;s=s||a.format;if(typeof e=="string"&&e!=""){var r=e.split(a.$opts.range),l=[];jet.each(r,function(e,t){var a=jet.reMatch(t),n={};jet.each(jet.reMatch(s),function(e,t){n[t]=a[e]});l.push(n)});i=l}else{i=e}var o=a.parseValue(i,s);if(t!=false)jet.valText(n,o);return o},getValue:function(s){var e=this,t=e.valCell,a=e.$opts,n,i=(new DateTime).reDate(),r=i.GetYear(),l=i.GetMonth(),o=i.GetDate(),d=i.GetHours(),h=i.GetMinutes(),u=i.GetSeconds();if(s==undefined&&jet.isBool(a.isShow)){n=jet.valText(t)}else{var c=jet.isBool(a.isShow)?jet.valText(t)=="":!jet.isBool(a.isShow),f=jet.extend({YYYY:null,MM:null,DD:null},s||{}),m=[],v=new Array(2),p=function(e){return[f[e]==undefined||f[e]==null,f[e]]},Y=[{YYYY:r,MM:l,DD:o,hh:d,mm:h,ss:u,zz:0},{YYYY:r,MM:l,DD:o,hh:d,mm:h,ss:u,zz:0}];if(c){jet.each(v,function(a){var n={};jet.each(ymdzArr,function(e,t){n[t]=parseInt(p(t)[0]?Y[a][t]:p(t)[1])});m.push(jet.extend(Y[a],n))})}else{var y=a.range!=false,j=e.getValue(),g=j.split(a.range),D=jet.reMatch(e.format);jet.each(v,function(e){var a={},n=y?jet.reMatch(g[e]):jet.reMatch(j);jet.each(D,function(e,t){a[t]=n[e]});var t=jet.extend(a,s||{});m.push(jet.extend(Y[e],t))})}n=m}return n},storeData:function(e,t){t=t||{};var a=this,n=a.$opts,s=n.multiPane,i=a.valCell,r=(new Date).getDate(),l=a.$data,o=jet.isObj(t),d={yearlist:[],monthlist:[[],[]],daylist:[],daytit:[],timelist:[]},h,u=e.DD==null?r:e.DD,c=t.DD==null?r:t.DD,f={hh:e.hh,mm:e.mm,ss:e.ss},m={hh:t.hh||0,mm:t.mm||0,ss:t.ss||0};d.yearlist.push(a.eachYear(parseInt(e.YYYY),1));if(s==false){var v=o?t.YYYY:e.YYYY;d.yearlist.push(a.eachYear(parseInt(v),2))}d.monthlist[0]=a.eachMonth(e.YYYY,0);if(s==false){var p=o?t.YYYY:e.YYYY+1;d.monthlist[1]=a.eachMonth(e.YYYY+1,1)}d.daylist.push(a.eachDays(e.YYYY,e.MM,u,0));d.daytit.push({YYYY:e.YYYY,MM:e.MM});if(s==false){var Y=jet.nextMonth(e.YYYY,e.MM);d.daylist.push(a.eachDays(Y.y,Y.m,c,1));d.daytit.push({YYYY:Y.y,MM:Y.m})}a.selectTime=[f,m];d.timelist.push(a.eachTime(f,1));if(s==false){h=a.dlen==7&&n.range&&!o?f:m;if(a.dlen==7&&n.range&&jet.valText(i)==""){a.selectTime[1]=jet.extend(m,f)}d.timelist.push(a.eachTime(h,2))}jet.extend(a.$data,d)},dateTemplate:function(){var a=this,e=a.$opts,n=e.multiPane,t="",s="",i=e.language,r=i.name=="cn"?"年":"",l=i.name=="cn"?"月":"";var o=n?"{%=ymlist[0].YYYY%}-{%=ymlist[0].MM%}":"{%=ymlist[0].YYYY%}-{%=ymlist[0].MM%}#{%=ymlist[ynidx].YYYY%}-{%=ymlist[ynidx].MM%}";var d=function(){var e=[],t=n?"11":"23";if(a.dlen==1){e=["{%=yearlist[i][0].y-"+t+"%}","{%=yearlist[i][yearlist[i].length-1].y%}"]}else if(a.dlen==2){e=n?["{%=yearlist[0][0].y-1%}","{%=yearlist[0][0].y+1%}"]:["{%=yearlist[i][0].y-"+t+"%}","{%=yearlist[i][yearlist[i].length-1].y%}"]}else if(a.dlen>2&&a.dlen<=6){e=["{%=yearlist[0][0].y-1%}","{%=yearlist[0][0].y+1%}"]}return e}();var h='<em class="yearprev yprev jedatefont" @on="yearBtn(lprev,'+d[0]+')">&#xed6c2;</em>',u='<em class="yearnext ynext jedatefont" on="yearBtn(lnext,'+d[2]+')">&#xed6c5;</em>',c='<em class="yearprev yprev jedatefont" on="yearBtn(rprev,'+d[3]+')">&#xed6c2;</em>',f='<em class="yearnext ynext jedatefont" @on="yearBtn(rnext,'+d[1]+')">&#xed6c5;</em>',m='{% if(dlen>2){ %}<em class="monthprev mprev jedatefont" @on="monthBtn(mprev,{%=daytit[i].YYYY%}-{%=daytit[i].MM%})">&#xed602;</em>{% } %}',v='{% if(dlen>2){ %}<em class="monthnext mnext jedatefont" @on="monthBtn(mnext,{%=daytit[i].YYYY%}-{%=daytit[i].MM%})">&#xed605;</em>{% } %}';var p='<table class="yeartable year{%= i==0 ? "left":"right"%}" style="display:{%=year ? "block":"none"%};"><tbody><tr>'+'{% for(var y=0;y<=11;y++){ %}<td class="{%=yearlist[i][y].style%}" @on="yearClick({%=yearlist[i][y].y%})"><span>{%=yearlist[i][y].y%}'+r+"</span></td>{% if((y+1)%3==0){ %} </tr>{% } %} {% } %} </tbody></table>";var Y='<table class="monthtable month{%= i==0 ? "left":"right"%}" style="display:{%=month ? "block":"none"%};"><tbody><tr>'+'{% for(var m=0;m<=11;m++){ %}<td class="{%=monthlist[i][m].style%}" ym="{%=monthlist[i][m].y%}-{%=monthlist[i][m].m%}" @on="monthClick({%=monthlist[i][m].y%}-{%=monthlist[i][m].m%})"><span>{%=monthlist[i][m].m%}'+l+"</span></td>{% if((m+1)%3==0){ %} </tr>{% } %} {% } %} </tbody></table>";var y='<table class="daystable days{%= i==0 ? "left":"right"%}" style="display:{%=day ? "block":"none"%};"><thead><tr>'+"{% for(var w=0;w<lang.weeks.length;w++){ %} <th>{%=lang.weeks[w]%}</th> {% } %}</tr></thead><tbody>"+'<tr>{% for(var d=0;d<=41;d++){ %}<td class="{%=daylist[i][d].style%}" ymd="{%=daylist[i][d].ymd%}" @on="daysClick({%=daylist[i][d].ymd%})">{%=daylist[i][d].day%}</td>{% if((d+1)%7==0){ %} </tr>{% } %} {% } %} </tbody></table>';var j='<div class="jedate-time">{% for(var h=0;h<timelist.length;h++){ %}<div class="timepane"><div class="timeheader">{%= timelist.length == 1 ? lang.timetxt[0]:lang.timetxt[h+1]%}</div><div class="timecontent">'+'<div class="hmstitle"><p>{%=lang.times[0]%}</p><p>{%=lang.times[1]%}</p><p>{%=lang.times[2]%}</p></div>'+'<div class="hmslist">{% for(var t=0;t<3;t++){ %}<div class="hmsauto"><ul>{% for(var s=0;s<timelist[h][t].length;s++){ %}<li class="{%=timelist[h][t][s].style%}" @on="hmsClick({%= h %},{%= h>0?3+t:t %})">{%= timelist[h][t][s].hms < 10 ? "0" + timelist[h][t][s].hms :timelist[h][t][s].hms %}</li>{% } %}</ul></div>{% } %}</div></div>'+"</div>{% } %}</div>";var g=e.shortcut.length>0?"{% for(var s=0;s<shortcut.length;s++){ %}<p @on=shortClick({%= shortcut[s].val %})>{%=shortcut[s].name%}</p>{% } %}":"";var D=function(){var e="";if(a.dlen==1){e='<span class="ymbtn">{%=yearlist[i][0].y%}'+r+" ~ {%=yearlist[i][yearlist[i].length-1].y%}"+r+"</span>"}else if(a.dlen==2){e='<span class="ymbtn" @on="yearShow({%=yearlist[0][i].y%})">{%=yearlist[0][i].y%}'+r+"</span>"}else if(a.dlen>2&&a.dlen<=6){e='<span class="ymbtn" @on="monthShow({%=daytit[i].MM%})">{%=daytit[i].MM%}'+l+"</span>"+'<span class="ymbtn" @on="yearShow({%=daytit[i].YYYY%})">{%=daytit[i].YYYY%}'+r+"</span>"}return e}();var M=function(){var e="";if(a.dlen==1){e=n?[h+f]:[h,f]}else if(a.dlen==2){e=n?[h+f]:[h,f]}else if(a.dlen>2&&a.dlen<=6){e=n?[h+m+v+f]:[h+m,v+f]}else if(a.dlen==7){e=""}return e}();if(a.dlen==1){t=p}else if(a.dlen==2){t=p+Y}else if(a.dlen==3){t=p+Y+y}else if(a.dlen>3&&a.dlen<=6){t=p+Y+y;s=j}else if(a.dlen==7){s=j}var x='{% for(var i=0;i<pane;i++){ %}<div class="jedate-pane">'+'<div class="jedate-header">{% if(i==0){ %}'+M[0]+"{% }else{ %}"+M[1]+"{% } %}"+D+"</div>"+'<div class="jedate-content{%= i==1?" bordge":"" %}">'+t+"</div>"+"</div>{% } %}";var b='{% if(timebtn){%}<div class="timecon" style="cursor: pointer;" @on="timeBtn">{%=lang.timetxt[0]%}</div>{% } %}<div class="btnscon">{% if(clear){ %}<span class="clear" @on="clearBtn">{%=lang.clear%}</span>{% } %}{% if(today){ %}<span class="today" @on="nowBtn">{%=lang.today%}</span>{% } %}{% if(yes){ %}<span class="setok" @on="sureBtn">{%=lang.yes%}</span>{% } %}</div>';return'<div class="jedate-menu" style="display:{%=shortcut.length>0 ? "block":"none"%};">'+g+'</div><div class="jedate-wrap">'+x+"</div>"+s+'<div class="jedate-footbtn">'+b+'</div><div class="jedate-tips"></div>'},compileBindNode:function(e){var s=this,i="@on";var r=function(e){var t=/\(.*\)/.exec(e);if(t){t=t[0];e=e.replace(t,"");t=t.replace(/[\(\)\'\"]/g,"").split(",")}else t=[];return[e,t]};jet.each(e.childNodes,function(e,t){if(t.nodeType===1){if(!s.$opts.festival)t.removeAttribute("ymd");s.compileBindNode(t);var a=t.getAttribute(i);if(a!=null){var n=r(a);jet.on(t,"click",function(){s[n[0]]&&s[n[0]].apply(t,n[1])});t.removeAttribute(i)}}})},methodEventBind:function(){var that=this,opts=that.$opts,multi=opts.multiPane,DTS=that.$data,result=(new DateTime).reDate(),dateY=result.GetYear(),dateM=result.GetMonth(),dateD=result.GetDate(),range=opts.range,elCell=that.dateCell;jet.extend(that,{yearBtn:function(e,t){var a=t.split("#"),n=jet.reMatch(a[0]),s=that.selectTime;exarr=[jet.extend({YYYY:parseInt(t),MM:dateM,DD:dateD},s[0]),{}];var i=that.parseValue([exarr[0]],that.format);that.storeData(exarr[0],exarr[1]);that.renderDate();opts.toggle&&opts.toggle({elem:that.valCell,val:i,date:exarr[0]})},yearShow:function(e){DTS.year=DTS.year?false:true;DTS.month=that.dlen<3?true:false;if(that.dlen>2&&that.dlen<=6){var t=$Q(".daystable",elCell);DTS.day=t.style.display=="none"?true:false}that.renderDate()},monthBtn:function(e,t){var a=jet.reMatch(t),n=that.selectTime,s=[],i,r,l=parseInt(a[0]),o=parseInt(a[1]);if(range){if(e=="mprev"){i=jet.prevMonth(l,o);r=jet.nextMonth(i.y,i.m)}else{r=jet.nextMonth(l,o);i=jet.prevMonth(r.y,r.m)}s=[jet.extend({YYYY:i.y,MM:i.m,DD:dateD},n[0]),{YYYY:r.y,MM:r.m,DD:dateD}]}else{var d=e=="mprev"?jet.prevMonth(l,o):jet.nextMonth(l,o);s=[jet.extend({YYYY:d.y,MM:d.m,DD:dateD},n[0]),{}]}var h=that.parseValue([s[0]],that.format);that.storeData(s[0],s[1]);that.renderDate();opts.toggle&&opts.toggle({elem:that.valCell,val:h,date:s[0]})},monthShow:function(e){DTS.year=false;DTS.month=DTS.month?false:true;if(that.dlen>2&&that.dlen<=6){var t=$Q(".daystable",elCell);DTS.day=t.style.display=="none"?true:false}that.renderDate()},shortClick:function(val){var reval=val.replace(/\#/g,","),evobj=eval("("+reval+")"),gval=jet.getDateTime(evobj),tmval=that.selectTime;that.selectValue=[jet.parse(gval,"YYYY-MM-DD")];that.selectDate=[{YYYY:gval.YYYY,MM:gval.MM,DD:gval.DD}];if(opts.onClose){var nYM=jet.nextMonth(gval.YYYY,gval.MM),ymarr=[{YYYY:gval.YYYY,MM:gval.MM,DD:gval.DD},{YYYY:nYM.y,MM:nYM.m,DD:null}];that.storeData(jet.extend(ymarr[0],tmval[0]),jet.extend(ymarr[1],tmval[1]));that.renderDate()}else{that.setValue(gval,that.format);that.closeDate()}},yearClick:function(e){if(jet.hasClass(this,"disabled"))return;var t="",a=that.dlen;if(range&&a==1){var n=that.selectValue.length;that.selectDate=n==2?[{YYYY:parseInt(e),MM:dateM}]:[{YYYY:that.selectDate[0].YYYY,MM:that.selectDate[0].MM},{YYYY:parseInt(e),MM:dateM}];that.selectValue=n==2?[e+"-"+jet.digit(dateM)]:[that.selectValue[0],e+"-"+jet.digit(dateM)];if(that.selectValue.length==2){var s=[that.selectValue[0],that.selectValue[1]],i=[{},{}];s.sort(function(e,t){return e>t?1:-1});that.selectValue=s;jet.each(s,function(a,e){jet.each(jet.reMatch(e),function(e,t){i[a][ymdzArr[e]]=t})});that.selectDate=i}}else if(a>1&&a<=6){t=parseInt(e)}else{that.selectValue=[e+"-"+jet.digit(dateM)];that.selectDate=[{YYYY:parseInt(e),MM:dateM}]}DTS.year=a==1?true:false;DTS.month=a<3?true:false;DTS.day=a>2&&a<=6?true:false;var r=a>1&&a<=6?t:parseInt(that.selectDate[0].YYYY);that.storeData(jet.extend({YYYY:r,MM:dateM,DD:dateD},that.selectTime[0]),{});that.renderDate()},monthClick:function(e){if(jet.hasClass(this,"disabled"))return;var t=jet.reMatch(e),n=[{},{}],a=that.selectValue.length;if(range){that.selectDate=a==2?[{YYYY:t[0],MM:t[1]}]:[{YYYY:that.selectDate[0].YYYY,MM:that.selectDate[0].MM},{YYYY:parseInt(e),MM:t[1]}];that.selectValue=a==2?[e]:[that.selectValue[0],e];if(that.selectValue.length==2){var s=[that.selectValue[0],that.selectValue[1]];s.sort(function(e,t){return e>t?1:-1});that.selectValue=s;jet.each(s,function(a,e){jet.each(jet.reMatch(e),function(e,t){n[a][ymdzArr[e]]=t})});that.selectDate=n}}else{that.selectValue=[e];that.selectDate=[{YYYY:t[0],MM:t[1]}]}if(that.dlen>2){DTS.year=false;DTS.month=false}DTS.day=that.dlen>2&&that.dlen<=6?true:false;that.storeData(jet.extend({YYYY:parseInt(that.selectDate[0].YYYY),MM:parseInt(that.selectDate[0].MM),DD:dateD},that.selectTime[0]),{});that.renderDate()},daysClick:function(e){if(jet.hasClass(this,"disabled"))return;var t=that.selectTime,n=jet.reMatch(e),a=that.selectValue.length,s="",i=[{},{}],r,l,o;if(range){if(a==1){var d=[that.selectValue[0],e];d.sort(function(e,t){return e>t?1:-1});that.selectValue=d;jet.each(d,function(a,e){jet.each(jet.reMatch(e),function(e,t){i[a][ymdzArr[e]]=t})});that.selectDate=i}else{that.selectValue=[e];i=[{YYYY:n[0],MM:n[1],DD:n[2]}];that.selectDate=[{YYYY:n[0],MM:n[1],DD:n[2]},{}]}l=jet.nextMonth(i[0].YYYY,i[0].MM);o=[{YYYY:i[0].YYYY,MM:i[0].MM,DD:i[0].DD},{YYYY:l.y,MM:l.m,DD:null}];that.storeData(jet.extend(o[0],t[0]),jet.extend(o[1],t[1]));that.renderDate()}else{that.selectValue=[e];that.selectDate=[{YYYY:n[0],MM:n[1],DD:n[2]},{YYYY:n[0],MM:n[1],DD:n[2]}];jet.each(new Array(range==false?1:2),function(a){jet.each(n,function(e,t){i[a][ymdzArr[e]]=t});jet.extend(i[a],t[a])});if(opts.onClose){that.storeData(jet.extend(i[0],t[0]),jet.extend(i[1],t[1]));that.renderDate()}else{if(that.dlen>3){var h=$Q(".jedate-time",elCell),u=h.style.display=="none";jet.text(that.dateCell.querySelector(".timecon"),u?opts.language.backtxt:opts.language.timetxt[0]);jet.setCss(h,{display:u?"block":"none"})}else{s=that.setValue(i,that.format);that.closeDate();opts.donefun&&opts.donefun.call(that,{elem:that.valCell,val:s,date:i})}}}},hmsClick:function(e,t){if(jet.lastTimeClick&&jet.lastTimeClick[0]===parseInt(t)&&(new Date).getTime()-jet.lastTimeClick[1]<300){that.sureBtn();return}var a=parseInt(t),n=parseInt(jet.text(this)),s=parseInt(e),i="action",r=["hh","mm","ss"],l=$Q(".jedate-time",that.dateCell).querySelectorAll("ul")[a],o=that.$data.timelist[0].length;if(jet.hasClass(this,"disabled"))return;jet.each(l.childNodes,function(e,t){var a=new RegExp("(^|\\s+)"+i+"(\\s+|$)","g");t.className=a.test(t.className)?t.className.replace(a,""):t.className});that.selectTime[s][s==1?r[a-o]:r[a]]=n;this.className=this.className+i;var d=l.querySelector("."+i);if(that.dlen==7&&e==0&&range&&!multi){var h=that.getValue({}),u=jet.nextMonth(h[0].YYYY,h[0].MM),c=that.selectTime;that.storeData({YYYY:h[0].YYYY,MM:h[0].MM,DD:null,hh:c[0].hh,mm:c[0].mm,ss:c[0].ss},{YYYY:u.y,MM:u.m,DD:null,hh:c[1].hh,mm:c[1].mm,ss:c[1].ss});that.renderDate()}jet.lastTimeClick=[a,(new Date).getTime()]},timeBtn:function(){var e=$Q(".jedate-time",elCell),t=e.style.display=="none";jet.text(this,t?opts.language.backtxt:opts.language.timetxt[0]);jet.setCss(e,{display:t?"block":"none"})},clearBtn:function(){jet.valText(that.valCell,"");that.selectDate=[jet.parse(jet.getDateTime({}),"YYYY-MM-DD hh:mm:ss")];that.closeDate();opts.clearfun&&opts.clearfun.call(that)},nowBtn:function(){var e=jet.getDateTime({}),t=jet.nextMonth(e.YYYY,e.MM),a;that.selectDate=[e];a=opts.isShow?that.setValue([e],that.format,true):jet.parse(e,that.format);if(opts.onClose&&range||!opts.isShow){that.storeData(e,{YYYY:t.y,MM:t.m,DD:null,hh:0,mm:0,ss:0});that.renderDate()}else{that.closeDate()}opts.donefun&&opts.donefun.call(that,{elem:that.valCell,val:a,date:e})},sureBtn:function(){var n=that.selectValue.length>1?[{},{}]:[{}],e="",t=that.selectTime;var a=function(e){var t=e.hh==undefined?0:e.hh,a=e.mm==undefined?0:e.mm,n=e.ss==undefined?0:e.ss;return parseInt(jet.digit(t)+""+jet.digit(a)+""+jet.digit(n))};if(range){if(that.selectValue.length>1){var s=that.selectValue;s.sort(function(e,t){return e>t?1:-1});jet.each(s,function(a,e){jet.each(jet.reMatch(e),function(e,t){n[a][ymdzArr[e]]=t});jet.extend(n[a],t[a])})}else if(that.dlen==7&&t.length>1){n=t}var i=a(t[0])>=a(t[1]),r=that.selectValue,l="";if(r[1]!=undefined)l=r[0].replace(/\-/g,"")==r[1].replace(/\-/g,"");if(r.length==1&&that.dlen<7){that.tips(opts.language.name=="cn"?"未选结束日期":"Please select the end date");return}else if(that.dlen==7&&i||l&&i){that.tips(opts.language.name=="cn"?"结束时间必须大于开始时间":"The end time must be greater than the start time");return}}else{jet.each(new Array(range==false?1:2),function(a){if(that.dlen!=7)jet.each(jet.reMatch(that.selectValue[0]),function(e,t){n[a][ymdzArr[e]]=t});jet.extend(n[a],t[a])})}e=that.setValue(n,that.format,opts.isShow?true:false);opts.isShow&&that.closeDate();opts.donefun&&opts.donefun.call(that,{elem:that.valCell,val:e,date:n})},blankArea:function(){jet.on(document,"mouseup",function(e){jet.stopPropagation(e);that.closeDate()});jet.on($Q(elx),"mouseup",function(e){jet.stopPropagation(e)})}})},eachYear:function(e,t){var a=this,n=a.$opts,s=parseInt(e),i=[],r="",l=a.selectDate,o,d=jet.reMatch(a.minDate),h=jet.reMatch(a.maxDate);o=t==1?s:a.yindex;a.yindex=t==1?12+s:12+a.yindex;var u=l[1]==undefined?"":l[1].YYYY;for(;o<a.yindex;o++){if(o==l[0].YYYY||o==u){r="action"}else if(o>l[0].YYYY&&o<u){r="contain"}else if(o<d[0]||o>h[0]){r="disabled"}else{r=""}i.push({style:r,y:o})}return i},eachMonth:function(n,e){var t=this,a=t.$opts,s=a.range,i=[],r=t.selectDate,l="",o=a.language.month,d=jet.reMatch(t.minDate),h=jet.reMatch(t.maxDate),u=parseInt(d[0]+""+jet.digit(d[1])),c=parseInt(h[0]+""+jet.digit(h[1])),f=parseInt(r[0].YYYY+""+jet.digit(r[0].MM)),m=r[1]?parseInt(r[1].YYYY+""+jet.digit(r[1].MM)):0;jet.each(o,function(e,t){var a=parseInt(n+""+jet.digit(t));if(a==f||a==m){l="action"}else if(a>f&&a<m){l="contain"}else if(a<u||a>c){l="disabled"}else{l=""}i.push({style:l,y:n,m:t})});return i},eachDays:function(e,t,a,n){var o=this,s=0,i=[],l=o.$opts,r=jet.isBool(l.multiPane),d=new Date(e,t-1,1).getDay()||7,h=l.range!=false,u=jet.getDaysNum(e,t),c=0,f=o.selectDate,m=jet.prevMonth(e,t),v=jet.isBool(l.isShow),p=jet.getDaysNum(e,m.m),Y=jet.nextMonth(e,t),y=o.valCell,j=l.language,g=l.valiDate||[],D=jet.reMatch(o.minDate),M=parseInt(D[0]+""+jet.digit(D[1])+""+jet.digit(D[2])),x=jet.reMatch(o.maxDate),b=parseInt(x[0]+""+jet.digit(x[1])+""+jet.digit(x[2]));var C=f[0]?parseInt(f[0].YYYY+""+jet.digit(f[0].MM)+""+jet.digit(f[0].DD)):"";var w=f[1]?parseInt(f[1].YYYY+""+jet.digit(f[1].MM)+""+jet.digit(f[1].DD)):"";var T=function(e,t,a){var n=l.marks,s=function(e,t){var a=e.length;while(a--){if(e[a]===t)return true}return false},i=jet.isType(n,"array");return i&&n.length>0&&s(n,e+"-"+jet.digit(t)+"-"+jet.digit(a))?'<i class="marks"></i>':""};var I=function(e,t,a){var n="";if(l.festival==true&&j.name=="cn"){var s=jeLunar(e,t-1,a),i=s.solarFestival||s.lunarFestival,r=(i&&s.jieqi)!=""?i:s.jieqi||s.showInLunar;n='<p><span class="solar">'+a+'</span><span class="lunar">'+r+"</span></p>"}else{n='<p class="nolunar">'+a+"</p>"}return n};var $=function(e,t,a,n){var s=parseInt(e+""+jet.digit(t)+""+jet.digit(a));if(n){if(s>=M&&s<=b)return true}else{if(M>s||b<s)return true}};var S=function(e,t){var a=function(e,t){for(var a in t)if(t[a]==e)return true;return false};if(g.length>0&&g[0]!=""){if(/\%/g.test(g[0])){var n=g[0].replace(/\%/g,"").split(","),s=[];jet.each(n,function(e,t){s.push(jet.digit(parseInt(t)))});var i=a(jet.digit(e),s)==false;t=jet.isBool(g[1])?i?" disabled":t:i?t:" disabled"}else{var r=o.dateRegExp(g[0]),l=r.test(jet.digit(e));t=jet.isBool(g[1])?l?" disabled":t:l?t:" disabled"}}return t};for(var V=p-d+1;V<=p;V++,s++){var k=T(m.y,m.m,V),A=$(m.y,m.m,V,false)?"disabled":"other";A=S(V,A);i.push({style:A,ymd:m.y+"-"+jet.digit(m.m)+"-"+jet.digit(V),day:I(m.y,m.m,V)+k})}for(var z=1;z<=u;z++,s++){var L=T(e,t,z),F="";var B=parseInt(e+""+jet.digit(t)+""+jet.digit(z)),E=B>C,G=B<w;if($(e,t,z,true)){if(B==C||B==w){F=" action"}else if(E&&G){F=" contain"}else{F=""}}else{F=" disabled"}F=S(z,F);i.push({style:"normal"+F,ymd:e+"-"+jet.digit(t)+"-"+jet.digit(z),day:I(e,t,z)+L})}for(var N=1,q=42-s;N<=q;N++){var H=T(Y.y,Y.m,N);var Q=$(Y.y,Y.m,N,false)?"disabled":"other";Q=S(N,Q);i.push({style:Q,ymd:Y.y+"-"+jet.digit(Y.m)+"-"+jet.digit(N),day:I(Y.y,Y.m,N)+H})}return i},eachTime:function(r,l){var o=this,e=o.$opts,d=e.range,h=e.multiPane,u=[],c=[],f=["hh","mm","ss"],m=[],v="",p=o.format,t=jet.trim(o.minDate).replace(/\s+/g," "),a=jet.trim(o.maxDate).replace(/\s+/g," "),Y=t.split(" "),n=a.split(" ");if(o.dlen>3&&/\:/.test(Y)&&/\:/.test(n)){u=jet.reMatch(/\s/.test(t)&&o.dlen>3?Y[1]:t);c=jet.reMatch(/\s/.test(a)&&o.dlen>3?n[1]:a)}jet.each([24,60,60],function(e,t){m[e]=[];var a=u[e]==undefined||u[e]==0?r[f[e]]:u[e],n=o.getValue()==""?a:r[f[e]];if(o.dlen>3&&/\:/.test(Y)&&l==1){o.selectTime[0][f[e]]=n}for(var s=0;s<t;s++){var i=new RegExp(f[e],"g").test(p);if(s==n){v=i?"action":"disabled"}else if(!i||!d&&h&&(s<u[e]||s>c[e])){v="disabled"}else if(!h){v=l==1&&s<u[e]||l==2&&s>c[e]?"disabled":""}else{v=""}m[e].push({style:v,hms:s})}});return m},closeDate:function(){var e=$Q(elx),t=$Q("#jedatetipscon");e&&document.body.removeChild(e);t&&document.body.removeChild(t);this.setDatas()},parseValue:function(e,a){var t=this,n=[],s=t.$opts,i=s.range;jet.each(e,function(e,t){n.push(jet.parse(t,a))});return i==false?n[0]:n.join(i)},dateRegExp:function(valArr){var enval=valArr.split(",")||[],regs="";var doExp=function(val){var arr,tmpEval,regs=/#?\{(.*?)\}/;val=val+"";while((arr=regs.exec(val))!=null){arr.lastIndex=arr.index+arr[1].length+arr[0].length-arr[1].length-1;tmpEval=parseInt(eval(arr[1]));if(tmpEval<0)tmpEval="9700"+-tmpEval;val=val.substring(0,arr.index)+tmpEval+val.substring(arr.lastIndex+1)}return val};if(enval&&enval.length>0){for(var i=0;i<enval.length;i++){regs+=doExp(enval[i]);if(i!=enval.length-1)regs+="|"}regs=regs?new RegExp("(?:"+regs+")"):null}else{regs=null}return regs},showFestival:function(){var o=this,d=o.$opts;jet.each(o.dateCell.querySelectorAll(".daystable td"),function(e,t){var r=jet.reMatch(jet.attr(t,"ymd")),l=document.createElement("div");t.removeAttribute("ymd");jet.on(t,"mouseover",function(){var e=new jeLunar(r[0],r[1]-1,r[2]);if($Q("#jedatetipscon"))return;l.id=l.className="jedatetipscon";var t="<p>"+e.solarYear+"年"+e.solarMonth+"月"+e.solarDate+"日 "+e.inWeekDays+'</p><p class="red">农历：'+e.shengxiao+"年 "+e.lnongMonth+"月"+e.lnongDate+"</p><p>"+e.ganzhiYear+"年 "+e.ganzhiMonth+"月 "+e.ganzhiDate+"日</p>";var a=(e.solarFestival||e.lunarFestival)!=""?'<p class="red">'+("节日："+e.solarFestival+e.lunarFestival)+"</p>":"";var n=e.jieqi!=""?'<p class="red">'+(e.jieqi!=""?"节气："+e.jieqi:"")+"</p>":"";var s=(e.solarFestival||e.lunarFestival||e.jieqi)!=""?a+n:"";jet.html(l,t+s);document.body.appendChild(l);var i=o.lunarOrien(l,this);jet.setCss(l,{zIndex:d.zIndex==undefined?1e4+5:d.zIndex+5,top:i.top,left:i.left,position:"absolute",display:"block"})});jet.on(t,"mouseout",function(){document.body.removeChild($Q("#jedatetipscon"))})});if(o.dateCell.nodeType===1&&!jet.hasClass(o.dateCell,"grid"))o.dateCell.className=o.dateCell.className+" grid"},lunarOrien:function(e,t,a){var n,s,i,r,l=t.getBoundingClientRect(),o=e.offsetWidth,d=e.offsetHeight;s=l.right+o/1.5>=jet.docArea(true)?l.right-o:l.left+(a?0:jet.docScroll(true));n=l.bottom+d/1<=jet.docArea()?l.bottom-1:l.top>d/1.5?l.top-d-1:jet.docArea()-d;if(s+o>jet.docArea(true))s=l.left-(o-l.width);i=Math.max(n+(a?0:jet.docScroll())+1,1)+"px",r=s+"px";return{top:i,left:r}},dateOrien:function(e,t,a){var n=this,s,i,r,l,o=n.$opts.fixed?t.getBoundingClientRect():e.getBoundingClientRect(),i=o.left,s=o.bottom;if(n.$opts.fixed){var d=e.offsetWidth,h=e.offsetHeight;if(i+d>jet.docArea(true)){i=i-(d-o.width)}if(s+h>jet.docArea()){s=o.top>h?o.top-h-2:jet.docArea()-h-1}r=Math.max(s+(a?0:jet.docScroll())+1,1)+"px";l=i+"px"}else{r="50%";l="50%";e.style.cssText="marginTop:"+-(o.height/2)+";marginLeft:"+-(o.width/2)}jet.setCss(e,{top:r,left:l})},tips:function(e,t){var a=this,n=$Q(".jedate-tips",a.dateCell),s;jet.html(n,e||"");jet.setCss(n,{display:"block"});clearTimeout(s);s=setTimeout(function(){jet.html(n,"");jet.setCss(n,{display:"none"})},(t||2.5)*1e3)},locateScroll:function(){var e=this,t=$Q(".jedate-time",e.dateCell).querySelectorAll("ul");jet.each(t,function(e,t){var a=t.querySelector(".action");t.scrollTop=a?a.offsetTop-145:0});if(e.dlen!=7)jet.setCss($Q(".jedate-time",e.dateCell),{display:"none"})}});function jeLunar(e,t,a){var c=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],f=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758];var m="甲乙丙丁戊己庚辛壬癸",v="子丑寅卯辰巳午未申酉戌亥",p="鼠牛虎兔龙蛇马羊猴鸡狗猪";var Y=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"];var y="日一二三四五六七八九十",j="初十廿卅",g=["正","二","三","四","五","六","七","八","九","十","十一","腊"],D={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},M={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"};function n(e){var t=function(e,t){var a=new Date(31556925974.7*(e-1900)+f[t]*6e4+Date.UTC(1900,0,6,2,5));return a.getUTCDate()},r=function(e){var t,a=348;for(t=32768;t>8;t>>=1)a+=c[e-1900]&t?1:0;return a+l(e)},a=function(e){return m.charAt(e%10)+v.charAt(e%12)},l=function(e){var t=o(e)?c[e-1900]&65536?30:29:0;return t},o=function(e){return c[e-1900]&15},d=function(e,t){return c[e-1900]&65536>>t?30:29},n=function(e){var t,a=0,n=0,s=new Date(1900,0,31),i=(e-s)/864e5;this.dayCyl=i+40;this.monCyl=14;for(t=1900;t<2050&&i>0;t++){n=r(t);i-=n;this.monCyl+=12}if(i<0){i+=n;t--;this.monCyl-=12}this.year=t;this.yearCyl=t-1864;a=o(t);this.isLeap=false;for(t=1;t<13&&i>0;t++){if(a>0&&t==a+1&&this.isLeap==false){--t;this.isLeap=true;n=l(this.year)}else{n=d(this.year,t)}if(this.isLeap==true&&t==a+1){this.isLeap=false}i-=n;if(this.isLeap==false)this.monCyl++}if(i==0&&a>0&&t==a+1){if(this.isLeap){this.isLeap=false}else{this.isLeap=true;--t;--this.monCyl}}if(i<0){i+=n;--t;--this.monCyl}this.month=t;this.day=i+1},s=function(e){return e<10?"0"+(e|0):e},i=function(e,t){var a=e;return t.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(e){switch(e){case"yyyy":var t="000"+a.getFullYear();return t.substring(t.length-4);case"dd":return s(a.getDate());case"d":return a.getDate().toString();case"MM":return s(a.getMonth()+1);case"M":return a.getMonth()+1}})},h=function(e,t){var a;switch(e,t){case 10:a="初十";break;case 20:a="二十";break;case 30:a="三十";break;default:a=j.charAt(Math.floor(t/10));a+=y.charAt(t%10)}return a};this.isToday=false;this.isRestDay=false;this.solarYear=i(e,"yyyy");this.solarMonth=i(e,"M");this.solarDate=i(e,"d");this.solarWeekDay=e.getDay();this.inWeekDays="星期"+y.charAt(this.solarWeekDay);var u=new n(e);this.lunarYear=u.year;this.shengxiao=p.charAt((this.lunarYear-4)%12);this.lunarMonth=u.month;this.lunarIsLeapMonth=u.isLeap;this.lnongMonth=this.lunarIsLeapMonth?"闰"+g[u.month-1]:g[u.month-1];this.lunarDate=u.day;this.showInLunar=this.lnongDate=h(this.lunarMonth,this.lunarDate);if(this.lunarDate==1){this.showInLunar=this.lnongMonth+"月"}this.ganzhiYear=a(u.yearCyl);this.ganzhiMonth=a(u.monCyl);this.ganzhiDate=a(u.dayCyl++);this.jieqi="";this.restDays=0;if(t(this.solarYear,(this.solarMonth-1)*2)==i(e,"d")){this.showInLunar=this.jieqi=Y[(this.solarMonth-1)*2]}if(t(this.solarYear,(this.solarMonth-1)*2+1)==i(e,"d")){this.showInLunar=this.jieqi=Y[(this.solarMonth-1)*2+1]}if(this.showInLunar=="清明"){this.showInLunar="清明节";this.restDays=1}this.solarFestival=D[i(e,"MM")+i(e,"dd")];if(typeof this.solarFestival=="undefined"){this.solarFestival=""}else{if(/\*(\d)/.test(this.solarFestival)){this.restDays=parseInt(RegExp.$1);this.solarFestival=this.solarFestival.replace(/\*\d/,"")}}this.showInLunar=this.solarFestival==""?this.showInLunar:this.solarFestival;this.lunarFestival=M[this.lunarIsLeapMonth?"00":s(this.lunarMonth)+s(this.lunarDate)];if(typeof this.lunarFestival=="undefined"){this.lunarFestival=""}else{if(/\*(\d)/.test(this.lunarFestival)){this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1);this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")}}if(this.lunarMonth==12&&this.lunarDate==d(this.lunarYear,12)){this.lunarFestival=M["0100"];this.restDays=1}this.showInLunar=this.lunarFestival==""?this.showInLunar:this.lunarFestival}return new n(new Date(e,t,a))}return jeDate});