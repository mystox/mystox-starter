scloudApp.controller("alarmFocusController",["$scope","$rootScope","alarmService","signalService",function(e,o,t,n){function i(){e.isLoading=!0,t.getFocusAlarmList({pageSize:e.paginationConf.itemsPerPage,currentPage:e.paginationConf.currentPage,enterpriseCode:e.user.enterpriseCode,serverCode:e.user.serverCode,type:"实时告警"},function(o){e.isLoading=!1,e.focusAlarmList=o.list,e.paginationConf.totalItems=o.count},function(){e.isLoading=!1})}function r(){e.isLoading2=!0,t.getFocusDIModelList({pageSize:e.paginationConf2.itemsPerPage,currentPage:e.paginationConf2.currentPage,enterpriseCode:e.user.enterpriseCode,serverCode:e.user.serverCode},function(o){e.isLoading2=!1,e.focusDIModelList=o.list,e.paginationConf2.totalItems=o.count},function(){e.isLoading2=!1})}$state&&($state=window.$state),$stateParams&&($stateParams=window.$stateParams),e.isLoading=!1,e.isLoading2=!1,e.paginationConf={currentPage:1,itemsPerPage:15,pagesLength:9,onChange:function(){i()}},e.paginationConf2={currentPage:1,itemsPerPage:15,pagesLength:9,onChange:function(){r()}},e.openDetailTab=function(o){e.openDetailIndex===o?e.openDetailIndex=null:e.openDetailIndex=o},e.alarmConfirm={obj:{},toModal:function(e,o){if(o.stopPropagation(),this.obj=Object.assign({},e),e.checkTime)return void this.execute();$("#alarmConfirmModal").modal("show")},execute:function(){var o=this;t.checkAlarm({operate:this.obj.checkTime?"取消确认":"确认",type:"实时告警",idList:[this.obj.id],treportList:[this.obj.treport],operateTime:(new Date).getTime(),operateDesc:this.obj.operateDesc,enterpriseCode:e.user.enterpriseCode,serverCode:e.user.serverCode},function(){o.clear(),i(),r()})},clear:function(){this.obj={},$("#alarmConfirmModal").modal("hide")}},e.removeFocus=function(o,t){t.stopPropagation(),n.removeAlarmFocus({enterpriseCode:e.user.enterpriseCode,serverCode:e.user.serverCode,id:o},function(){i(),r()})}}]);