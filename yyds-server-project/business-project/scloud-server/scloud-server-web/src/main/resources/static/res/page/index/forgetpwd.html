<div class="form-title">
    <h3>云监控系统 - 忘记密码</h3>
</div>
<form class="form-horizontal" id="forgetForm" name="forget.form" novalidate ng-cloak
      ng-submit="forget.execute();">
    
    <div class="control-group" 
         ng-class="getValidClass(forget.form.phone);">
        <label class="control-label">手机号</label>
        <div class="controls">
            <input type="text" name="phone" required placeholder="请输入手机号"
                   ng-model="forget.obj.phone" 
                   ng-pattern="REGEX.cellphone">
            <span class="help-inline"></span>
        </div>
    </div>
    
    <div class="control-group"
         ng-class="getValidClass(forget.form.messageCode);">
        <label class="control-label">短信验证码</label>
        <div class="controls">
            <input type="text" name="messageCode" required placeholder="请输入短信验证码"
                   class="short-input"
                   ng-model="forget.obj.messageCode" 
                   ng-change="clearErrorInfo();"
                   ng-pattern="REGEX.messageCode">
            <button type="button" class="btn btn-send" 
                   ng-click="sendPhoneCode(forget.obj.phone);"
                   scloud-count-down sng-count="60" sng-title="发送" sng-disabled='forget.form.phone.$invalid'
                    sng-Have='forget.have'>
                <i class="ic ic-send ic-min"></i>
            </button>
            <span class="help-inline">
                <span ng-bind="codeErrorInfo"></span> 
            </span>
        </div>
    </div>
    
    <div class="control-group" 
         ng-class="getValidClass(forget.form.password);">
        <label class="control-label">新密码</label>
        <div class="controls">
            <input type="password" name="password" required placeholder="请输入新密码" 
                   ng-model="forget.obj.password" 
                   ng-pattern="REGEX.password">
            <span class="help-inline"></span>
        </div>
    </div>
    
    <div class="control-group" 
         ng-class="getValidClass(forget.form.confirmPassword);">
        <label class="control-label">确认密码</label>
        <div class="controls">
            <input type="password" name="confirmPassword" required placeholder="请再次输入密码" 
                   ng-model="forget.obj.confirmPassword"
                   ng-pattern="REGEX.password">
            <span class="help-inline">
                <span ng-if="forget.form.password.$valid && forget.form.confirmPassword.$valid && forget.obj.password !== forget.obj.confirmPassword" ng-bind="'密码不一致'"></span>
            </span>
        </div>
    </div>
    
    <div class="control-group">
        <div class="controls">
            <button type="submit" class="btn btn-submit" 
                    ng-disabled="forget.form.$invalid || forget.obj.password !== forget.obj.confirmPassword">确定修改</button>
        </div>
    </div>
    
    <div class="control-group">
        <div class="controls">
            <p class="bottom-right">
                <a ng-click="toLogin();">返回登录页</a>
            </p>
        </div>
    </div>
    
</form>
