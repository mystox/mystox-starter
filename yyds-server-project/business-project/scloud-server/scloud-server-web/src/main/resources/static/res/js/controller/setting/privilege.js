scloudApp.controller("privilegeController",["$scope","$rootScope","privilegeService","treeService",function(e,r,o,t){function u(){e.isLoading=!0,o.getUserGroupList(function(r){e.isLoading=!1,e.userGroupList=r})}function i(){return t.getCheckedPrivilegeCodes("privilegeTree")}$state&&($state=window.$state),$stateParams&&($stateParams=window.$stateParams),e.UPDATE_MODE="ADD",e.updateUserGroup={form:{},obj:{},toModal:null,execute:null,clear:null},e.deleteUserGroup={form:{},obj:{},toModal:null,execute:null,clear:null},e.updateUserGroup.toModal=function(r){e.UPDATE_MODE="MODIFY",e.updateUserGroup.obj=r,t.checkPrivilegeNode("privilegeTree",r.privilegeCodes)},e.updateUserGroup.execute=function(){e.updateUserGroup.obj.privilegeCodes=i(),"ADD"===e.UPDATE_MODE?o.addUserGroup(e.updateUserGroup.obj,function(){e.updateUserGroup.clear(),u()}):"MODIFY"===e.UPDATE_MODE&&o.modifyUserGroup(e.updateUserGroup.obj,function(){e.updateUserGroup.clear(),u()})},e.updateUserGroup.clear=function(){e.updateUserGroup.form.$setPristine(),e.updateUserGroup.obj={},t.checkedAllNodes("privilegeTree",!1),e.UPDATE_MODE="ADD"},e.deleteUserGroup.toModal=function(r){$("#deleteUserGroupModal").modal("show"),e.deleteUserGroup.obj=r},e.deleteUserGroup.execute=function(){$("#deleteUserGroupModal").modal("hide"),o.deleteUserGroup(e.deleteUserGroup.obj,function(){e.deleteUserGroup.clear(),u()})},e.deleteUserGroup.clear=function(){e.deleteUserGroup.form.$setPristine(),$("#deleteUserGroupModal").modal("hide")},u(),function(){e.treeLoading=!0,t.getPrivilegeTree(function(r){e.treeLoading=!1,e.zTree=t.createZTree(r),t.initTree(e.zTree.zNodes,"privilegeTree","checkboxPrivilegeTree")})}()}]);