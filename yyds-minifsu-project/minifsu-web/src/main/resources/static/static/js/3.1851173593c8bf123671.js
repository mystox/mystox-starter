webpackJsonp([3],{FrPK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pointList flex-column"},[n("operation-bar-layout",{staticStyle:{}},[n("div",{attrs:{slot:"query"},slot:"query"},[n("span",[t._v("信号点列表")])]),t._v(" "),n("div",{attrs:{slot:"operate"},slot:"operate"})]),t._v(" "),n("table-box",{staticClass:"flex-1",attrs:{"row-class-name":"cursor-point","row-click":t.intoNextPage,loading:t.loading,stripe:!0,border:!0,pagination:t.pagination,data:t.pointList},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),t._l(t.columns,function(e){return n("el-table-column",{key:e.label,attrs:{formatter:t.$tableFilter(e.filter),prop:e.value,label:e.label,"min-width":e.width,fixed:e.fixed,className:e.className,resizable:!1}})}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("SECURITY.USER.OPERATION"),fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return["AO"===e.row.dataType||"DO"===e.row.dataType?n("i",{staticStyle:{color:"#20A0FF",cursor:"pointer"},on:{click:function(n){return t.showDialog("setSignalDialog",e.row)}}},[t._v("\n          设置信号点值\n          ")]):t._e()]}}])})],2),t._v(" "),n("modal",{ref:"setSignalDialog",attrs:{option:t.optionModify}})],1)},staticRenderFns:[]};var a=n("C7Lr")({name:"s-points",props:{},data:function(){return{searcher:{name:""},multipleSelection:[],pointList:[],userGroups:[],columns:[{label:"信号点 ID",value:"coId",filter:"nullFilter",className:""},{label:"信号点类型",value:"dataType",filter:"nullFilter",className:""},{label:"信号点名称",value:"name",filter:"nullFilter",className:""}],modifyCont:{username:"",password:"",group_name:"",comment:""},pagination:{total:0,currentPage:1,pageSize:15,onChange:this.onPaginationChanged},loading:!1,options:[{label:"关",value:0},{label:"开",value:1}]}},computed:{optionModify:function(){var t=void 0;return"DO"===this.modifyCont.dataType?t=[{type:"select",name:"value",options:[{label:"关",value:0},{label:"开",value:1}],defaultValue:this.modifyCont.value,rule:{required:!0,requiredError:"输入内容不可为空。"}}]:"AO"===this.modifyCont.dataType&&(t=[{type:"input",name:"value",defaultValue:this.modifyCont.value,rule:{required:!0,requiredError:"输入内容不可为空。"}}]),{name:"设置信号点值",form:{"信号点 ID":[{type:"span",text:this.modifyCont.coId,rule:{}}],"信号点值":t},clearText:this.$t("OPERATION.CLEAR"),clear:this.clear,executeText:this.$t("OPERATION.CONFIRM"),execute:this.executeModify,style:{}}}},methods:{addMockData:function(){for(var t=0;t<10;t++)this.pointList.push({username:"pointName",password:"123456",group_name:"城管大队三组",comment:"**********"});this.pagination.total=this.pointList.length},getSignalList:function(){var t=this;this.$api.getSignalList({deviceId:this.$route.query.deviceId,resNo:this.$route.query.resNo-0,type:this.$route.query.type-0},this.$route.query.sn).then(function(e){t.pagination.total=e.data.info.length,t.pointList=e.data.info,t.dev=e.data.dev,t.loading=!1},function(e){e&&(t.loading=!1)})},onPaginationChanged:function(t){this.pagination.pageSize=t.pageSize,this.pagination.currentPage=t.currentPage,this.getUsers()},handleSelectionChange:function(t){this.multipleSelection=this.comFunc.map(t,"username")},executeModify:function(t){this.updateContent(t)},clear:function(t){},showDialog:function(t,e){e&&(this.modifyCont=e),this.$refs[t].toModal()},intoNextPage:function(){},addContent:function(t){var e=this,n={username:t.username,password:t.password,group_name:t.group_name,comment:t.comment};this.appHttp.postAddUser(n).then(function(){e.getUsers()})},updateContent:function(t){var e=this;this.$api.setSignal({dev:"3-1",stePoint:201001,steData:1},this.$route.query.sn).then(function(){e.getSignalList()})},deleteContents:function(t){var e=this,n={users:this.multipleSelection};this.appHttp.postDeleteUsers(n).then(function(){t&&t.call(e)})},deleteContentsNeedValidated:function(){var t=this;0===this.multipleSelection.length?this.$message({message:"请选择删除项",type:"warning",showClose:!0}):this.$confirm("此操作将永久删除所选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteContents(function(){this.getUsers()})}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0})})}},mounted:function(){this.getSignalList()}},i,!1,function(t){n("fOz8")},null,null);e.default=a.exports},fOz8:function(t,e){}});