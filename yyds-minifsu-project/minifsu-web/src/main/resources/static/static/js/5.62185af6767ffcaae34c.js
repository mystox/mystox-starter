webpackJsonp([5],{VG4s:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("aA9S"),s=n.n(i),o={name:"s-sites",props:{},data:function(){return{searcher:{name:""},multipleSelection:[],fsuList:[],userGroups:[],columns:[{label:"绑定状态",value:"bindStatus",width:270,filter:"nullFilter",className:""}],modifyCont:{},pagination:{total:0,currentPage:1,pageSize:15,onChange:this.onPaginationChanged},loading:!1}},computed:{optionBind:function(){return{name:"绑定",form:{"SN ID":[{type:"span",text:this.modifyCont.sN,rule:{}}],"SN 设备列表":[{type:"textarea",name:"snDeviceList",defaultValue:"123123123\n123123123\n123123123\n123123123\n123123123\n",disabled:!0,rows:8,rule:{}}],"FSU ID":[{type:"input",name:"fsuId",rule:{}}],"FSU 设备列表":[{type:"textarea",name:"devIds",rows:8,rule:{}}]},clearText:this.$t("OPERATION.CLEAR"),clear:this.clear,executeText:this.$t("OPERATION.CONFIRM"),execute:this.executeModify,style:{}}}},methods:{addMockData:function(){for(var t=0;t<10;t++)this.fsuList.push({username:"某某某",password:"123456",group_name:"城管大队一组",comment:"**********"});this.pagination.total=this.fsuList.length},getFsuList:function(){var t=this;this.$api.getFsuList({}).then(function(e){t.pagination.total=e.data.length,t.fsuList=e.data,t.loading=!1},function(e){e&&(t.loading=!1)})},onPaginationChanged:function(t){this.pagination.pageSize=t.pageSize,this.pagination.currentPage=t.currentPage,this.getUsers()},handleSelectionChange:function(t){this.multipleSelection=this.comFunc.map(t,"username")},intoNextPage:function(){},executeAdd:function(t){this.addContent(t)},executeModify:function(t){this.modifyCont=s()({},this.modifyCont,t),this.modifyCont.devIds=t.devIds.split("\n")},clear:function(t){},showDialog:function(t,e){e&&(this.modifyCont=e),this.$refs[t].toModal()},updateContent:function(t){var e=this,n={username:t.username,password:t.password,group_name:t.password,comment:t.comment};this.appHttp.postUpdateUser(n).then(function(){e.getUsers()})},deleteContents:function(t){var e=this,n={users:this.multipleSelection};this.appHttp.postDeleteUsers(n).then(function(){t&&t.call(e)})},deleteContentsNeedValidated:function(){var t=this;0===this.multipleSelection.length?this.$message({message:"请选择删除项",type:"warning",showClose:!0}):this.$confirm("此操作将永久删除所选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteContents(function(){this.getUsers()})}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0})})}},mounted:function(){this.getFsuList(!0)}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fsuList flex-column"},[n("operation-bar-layout",{staticStyle:{}},[n("div",{attrs:{slot:"query"},slot:"query"},[t._v("\n      SN 列表\n    ")]),t._v(" "),n("div",{attrs:{slot:"operate"},slot:"operate"})]),t._v(" "),n("table-box",{staticClass:"flex-1",attrs:{"row-class-name":"cursor-point","row-click":t.intoNextPage,loading:t.loading,stripe:!0,border:!0,pagination:t.pagination,data:t.fsuList},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),t._l(t.columns,function(e){return n("el-table-column",{key:e.label,attrs:{formatter:t.$tableFilter(e.filter),prop:e.value,label:e.label,"min-width":e.width,fixed:e.fixed,className:e.className,resizable:!1}})}),t._v(" "),n("el-table-column",{attrs:{label:"SN",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"font-size":"14px",color:"#20A0FF",cursor:"pointer"}},[n("router-link",{attrs:{to:{path:"/devices",query:{sN:e.row.sN}},tag:"span"}},[t._v("\n            "+t._s(e.row.sN)+"\n          ")])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("SECURITY.USER.OPERATION"),fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("i",{staticStyle:{color:"#20A0FF",cursor:"pointer"},on:{click:function(n){return t.showDialog("bindDialog",e.row)}}},[t._v("绑定")])])]}}])})],2),t._v(" "),n("modal",{ref:"bindDialog",attrs:{option:t.optionBind}})],1)},staticRenderFns:[]};var l=n("C7Lr")(o,a,!1,function(t){n("kfG9")},null,null);e.default=l.exports},kfG9:function(t,e){}});