webpackJsonp([2],{cgDa:function(t,e){},wA8J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alarmList flex-column"},[n("operation-bar-layout",{staticStyle:{}},[n("div",{attrs:{slot:"query"},slot:"query"},[t._v("\n      门限设置\n    ")]),t._v(" "),n("div",{attrs:{slot:"operate"},slot:"operate"})]),t._v(" "),n("table-box",{staticClass:"flex-1",attrs:{"row-class-name":"cursor-point","row-click":t.intoNextPage,loading:t.loading,stripe:!0,border:!0,pagination:t.pagination,data:t.alarmList},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),t._l(t.columns,function(e){return n("el-table-column",{key:e.label,attrs:{formatter:t.$tableFilter(e.filter),prop:e.value,label:e.label,"min-width":e.width,fixed:e.fixed,className:e.className,resizable:!1}})}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("SECURITY.USER.OPERATION"),fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticStyle:{color:"#20A0FF",cursor:"pointer"},on:{click:function(n){return t.showDialog("threshold",e.row)}}},[t._v("门限设置")])]}}])})],2),t._v(" "),n("modal",{ref:"threshold",attrs:{option:t.optionModify}})],1)},staticRenderFns:[]};var i=n("C7Lr")({name:"s-points",props:{},data:function(){return{searcher:{name:""},multipleSelection:[],alarmList:[],userGroups:[],columns:[{label:"告警点 ID",value:"alarmId",filter:"nullFilter",className:""},{label:"门限值",value:"threshold",filter:"nullFilter",className:""}],modifyCont:{username:"",password:"",group_name:"",comment:""},pagination:{total:0,currentPage:1,pageSize:15,onChange:this.onPaginationChanged},loading:!1}},computed:{optionModify:function(){return{name:"门限设置",form:{"门限值":[{type:"input",name:"threshold",defaultValue:this.modifyCont.threshold,rule:{required:!0,requiredError:"输入内容不可为空。"}}]},clearText:this.$t("OPERATION.CLEAR"),clear:this.clear,executeText:this.$t("OPERATION.CONFIRM"),execute:this.executeModify,style:{}}}},methods:{addMockData:function(){for(var t=0;t<10;t++)this.alarmList.push({username:"pointName",password:"123456",group_name:"城管大队三组",comment:"**********"});this.pagination.total=this.alarmList.length},getThreshold:function(){var t=this;this.$api.getThreshold({port:this.$route.query.port,resNo:this.$route.query.resNo-0,type:this.$route.query.type-0},this.$route.query.sn).then(function(e){t.pagination.total=e.data.length,t.alarmList=e.data,t.loading=!1},function(e){e&&(t.loading=!1)})},onPaginationChanged:function(t){this.pagination.pageSize=t.pageSize,this.pagination.currentPage=t.currentPage,this.getUsers()},handleSelectionChange:function(t){this.multipleSelection=this.comFunc.map(t,"username")},executeModify:function(t){this.updateContent(t)},clear:function(t){},showDialog:function(t,e){e&&(this.modifyCont=e),this.$refs[t].toModal()},intoNextPage:function(){},updateContent:function(t){var e=this,n={deviceId:this.modifyCont.deviceId,configId:this.modifyCont.id,coId:this.modifyCont.coId,threshold:t.threshold-0};this.$api.setThreshold(n,this.$route.query.sn).then(function(){e.getThreshold()})},deleteContents:function(t){var e=this,n={users:this.multipleSelection};this.appHttp.postDeleteUsers(n).then(function(){t&&t.call(e)})},deleteContentsNeedValidated:function(){var t=this;0===this.multipleSelection.length?this.$message({message:"请选择删除项",type:"warning",showClose:!0}):this.$confirm("此操作将永久删除所选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteContents(function(){this.getUsers()})}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0})})}},mounted:function(){this.getThreshold()}},o,!1,function(t){n("cgDa")},null,null);e.default=i.exports}});