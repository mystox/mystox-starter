webpackJsonp([8],{"5l6F":function(e,t){},FrPK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"s-points",props:{},data:function(){return{searcher:{name:"",timeRange:[new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0),new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1,0,0,0)]},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},multipleSelection:[],pointList:[],userGroups:[],columns:[{label:"信号点名称",value:"name",filter:"nullFilter",className:""},{label:"信号点 ID",value:"coId",filter:"nullFilter",className:""},{label:"信号点值",value:"value",filter:"nullFilter",className:""},{label:"信号点类型",value:"dataType",filter:"nullFilter",className:""}],modifyCont:{username:"",password:"",group_name:"",comment:""},pagination:{total:0,currentPage:1,pageSize:15,onChange:this.onPaginationChanged},loading:!1,options:[{label:"关",value:0},{label:"开",value:1}],dev:""}},computed:{optionModify:function(){var e=void 0;return"DO"===this.modifyCont.dataType?e=[{type:"select",name:"value",options:[{label:"关",value:0},{label:"开",value:1}],defaultValue:this.modifyCont.value,rule:{required:!0,requiredError:"输入内容不可为空。"}}]:"AO"===this.modifyCont.dataType&&(e=[{type:"input",name:"value",defaultValue:this.modifyCont.value,rule:{required:!0,requiredError:"输入内容不可为空。"}}]),{name:"设置信号点值",form:{"信号点 ID":[{type:"span",text:this.modifyCont.coId,rule:{}}],"信号点值":e},clearText:this.$t("OPERATION.CLEAR"),clear:this.clear,executeText:this.$t("OPERATION.CONFIRM"),execute:this.executeModify,style:{}}}},methods:{addMockData:function(){for(var e=0;e<10;e++)this.pointList.push({username:"pointName",password:"123456",group_name:"城管大队三组",comment:"**********"});this.pagination.total=this.pointList.length},getSignalList:function(){var e=this;this.$api.getSignalList({deviceId:this.$route.query.deviceId,resNo:this.$route.query.resNo-0,type:this.$route.query.type-0},this.$route.query.sN).then(function(t){e.pagination.total=t.data.info.length,e.pointList=t.data.info,e.dev=t.data.dev,e.loading=!1},function(t){t&&(e.loading=!1)})},onPaginationChanged:function(e){this.pagination.pageSize=e.pageSize,this.pagination.currentPage=e.currentPage,this.getUsers()},handleSelectionChange:function(e){this.multipleSelection=this.comFunc.map(e,"username")},executeModify:function(e){this.setSignal(e)},clear:function(e){},showDialog:function(e,t){t&&(this.modifyCont=t),this.$refs[e].toModal()},intoNextPage:function(){},setSignal:function(e){var t=this,a={dev:this.dev,stePoint:this.modifyCont.coId-0,steData:e.value-0};this.$api.setSignal(a,this.$route.query.sN).then(function(e){t.getSignalList()}.bind(this))}},mounted:function(){this.getSignalList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pointList flex-column"},[a("sc-breadcrumb",{attrs:{urls:[{name:"SN列表"},{name:"设备列表",path:e._ctx+"/devices",query:{sN:e.$route.query.sN}},{name:"实时数据"}]}}),e._v(" "),a("table-box",{staticClass:"flex-1",attrs:{"row-class-name":"cursor-point","row-click":e.intoNextPage,loading:e.loading,stripe:!0,border:!0,data:e.pointList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),e._l(e.columns,function(t){return a("el-table-column",{key:t.label,attrs:{formatter:e.$tableFilter(t.filter),prop:t.value,label:t.label,"min-width":t.width,fixed:t.fixed,className:t.className,resizable:!1}})}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("SECURITY.USER.OPERATION"),fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["AO"===t.row.dataType||"DO"===t.row.dataType?a("i",{staticStyle:{color:"#20A0FF",cursor:"pointer"},on:{click:function(a){return e.showDialog("setSignalDialog",t.row)}}},[e._v("\n          设置信号点值\n          ")]):e._e()]}}])})],2),e._v(" "),a("modal",{ref:"setSignalDialog",attrs:{option:e.optionModify}})],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("5l6F")},null,null);t.default=o.exports}});